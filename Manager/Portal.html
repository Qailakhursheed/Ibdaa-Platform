<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام إدارة منصة إبداع</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide-icons@latest/dist/lucide.js"></script>
    
    <!-- Google Fonts: Cairo -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f8fafc; /* gray-50 */
        }
        .sidebar-link {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.2s ease-in-out;
            color: #4b5563; /* gray-600 */
            font-weight: 600;
        }
        .sidebar-link:hover, .sidebar-link.active {
            background-color: #e0f2fe; /* sky-100 */
            color: #0284c7; /* sky-600 */
        }
        .sidebar-link i {
            margin-left: 0.75rem;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-backdrop.visible {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        .modal-backdrop.visible .modal-content {
            transform: scale(1);
        }
    </style>
</head>
<body class="antialiased text-gray-800">
    <div class="flex h-screen bg-gray-50">
        <!-- Sidebar -->
        <aside class="w-64 flex-shrink-0 bg-white border-l border-gray-200 p-4 flex flex-col">
            <div class="flex items-center justify-center mb-8">
                <i data-lucide="sparkles" class="text-sky-500 h-8 w-8"></i>
                <h1 class="text-2xl font-bold text-gray-800 mr-2">منصة إبداع</h1>
            </div>
            <nav class="flex-grow space-y-2">
                <a href="#dashboard" class="sidebar-link active" data-page="dashboard">
                    <i data-lucide="layout-dashboard"></i>
                    <span>لوحة التحكم</span>
                </a>
                <a href="#trainees" class="sidebar-link" data-page="trainees">
                    <i data-lucide="users"></i>
                    <span>المتدربين</span>
                </a>
                <a href="#trainers" class="sidebar-link" data-page="trainers">
                    <i data-lucide="graduation-cap"></i>
                    <span>المدربين</span>
                </a>
                <a href="#courses" class="sidebar-link" data-page="courses">
                    <i data-lucide="book-open"></i>
                    <span>البرامج والدورات</span>
                </a>
                <a href="#finance" class="sidebar-link" data-page="finance">
                    <i data-lucide="dollar-sign"></i>
                    <span>الشؤون المالية</span>
                </a>
                <a href="#admin-body" class="sidebar-link" data-page="admin-body">
                    <i data-lucide="shield"></i>
                    <span>الهيئة الإدارية</span>
                </a>
                 <a href="#settings" class="sidebar-link" data-page="settings">
                    <i data-lucide="settings"></i>
                    <span>الإعدادات</span>
                </a>
            </nav>
            <div class="mt-auto">
                <div class="p-4 rounded-lg bg-sky-50 border border-sky-200 text-center">
                    <h3 class="font-bold text-sky-800">بحاجة للمساعدة؟</h3>
                    <p class="text-sm text-sky-700 mt-1">تواصل مع الدعم الفني للحصول على المساعدة.</p>
                    <button class="mt-3 w-full bg-sky-500 text-white text-sm py-2 px-3 rounded-lg hover:bg-sky-600 transition-colors">
                        تواصل معنا
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto">
            <header class="bg-white/80 backdrop-blur-sm sticky top-0 z-10 border-b border-gray-200 p-4 flex items-center justify-between">
                <div>
                    <h2 class="text-xl font-bold" id="page-title">لوحة التحكم</h2>
                    <p class="text-sm text-gray-500" id="page-subtitle">نظرة عامة على أداء المنصة</p>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <i data-lucide="search" class="absolute top-1/2 right-3 -translate-y-1/2 text-gray-400 h-5 w-5"></i>
                        <input type="text" placeholder="بحث..." class="w-64 bg-gray-100 rounded-full py-2 px-4 pr-10 focus:outline-none focus:ring-2 focus:ring-sky-500">
                    </div>
                    <button class="relative text-gray-500 hover:text-gray-800" type="button" aria-label="الإشعارات" title="الإشعارات">
                        <i data-lucide="bell" aria-hidden="true"></i>
                        <span class="absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full border-2 border-white"></span>
                    </button>
                    <div class="flex items-center space-x-2">
                        <img src="https://placehold.co/40x40/0ea5e9/ffffff?text=GM" alt="Admin" class="rounded-full">
                        <div>
                            <p class="font-semibold text-sm">عبدالباسط اليوسفي</p>
                            <p class="text-xs text-gray-500">المدير العام</p>
                        </div>
                    </div>
                </div>
            </header>
            
            <div class="p-6 space-y-6" id="app-content">
                <!-- Content will be dynamically loaded here -->
            </div>
        </main>
    </div>

    <!-- Add/Edit Trainee Modal -->
    <div id="traineeModal" class="modal-backdrop">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-3xl m-4 modal-content max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b sticky top-0 bg-white z-10">
                <div class="flex justify-between items-center">
                    <h3 id="traineeModalTitle" class="text-xl font-bold text-gray-800">إضافة متدرب جديد</h3>
                    <button id="closeTraineeModalBtn" class="text-gray-400 hover:text-gray-600">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>
                <p class="text-sm text-gray-500 mt-1">يرجى ملء جميع البيانات المطلوبة للمتدرب.</p>
            </div>
            <form class="p-8 space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="nameAr" class="block text-sm font-medium text-gray-700 mb-1">الاسم الرباعي (عربي)</label>
                        <input type="text" id="nameAr" class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-sky-500 focus:border-sky-500" placeholder="مثال: محمد عبدالله صالح أحمد">
                    </div>
                    <div>
                        <label for="nameEn" class="block text-sm font-medium text-gray-700 mb-1">الاسم الرباعي (إنجليزي)</label>
                        <input type="text" id="nameEn" dir="ltr" class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-sky-500 focus:border-sky-500" placeholder="Mohammed Abdullah Saleh Ahmed">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="dob" class="block text-sm font-medium text-gray-700 mb-1">تاريخ الميلاد</label>
                        <input type="date" id="dob" class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-sky-500 focus:border-sky-500">
                    </div>
                     <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">رقم الهاتف</label>
                        <input type="tel" id="phone" dir="ltr" class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-sky-500 focus:border-sky-500" placeholder="+967 777 123 456">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="governorate" class="block text-sm font-medium text-gray-700 mb-1">المحافظة</label>
                        <select id="governorate" class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-sky-500 focus:border-sky-500">
                            <option>تعز</option>
                            <option>صنعاء</option>
                            <option>عدن</option>
                            <option>إب</option>
                        </select>
                    </div>
                    <div>
                        <label for="district" class="block text-sm font-medium text-gray-700 mb-1">المديرية</label>
                        <input type="text" id="district" class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-sky-500 focus:border-sky-500" placeholder="مثال: المظفر">
                    </div>
                </div>
                <div>
                     <label for="course" class="block text-sm font-medium text-gray-700 mb-1">الدورة التدريبية</label>
                    <select id="course" class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-sky-500 focus:border-sky-500">
                        <option selected disabled>-- اختر الدورة --</option>
                        <optgroup label="برامج الحاسوب">
                            <option>الرخصة الدولية لقيادة الحاسوب (ICDL)</option>
                            <option>صيانة حاسوب</option>
                            <option>تصميم جرافيك</option>
                        </optgroup>
                         <optgroup label="برامج اللغة الإنجليزية">
                            <option>مستوى مبتدئ</option>
                            <option>مستوى متوسط</option>
                            <option>مستوى متقدم</option>
                        </optgroup>
                    </select>
                </div>
                <div class="pt-6 border-t flex justify-end space-x-3 space-x-reverse">
                    <button type="button" id="cancelTraineeModalBtn" class="bg-gray-100 text-gray-700 py-2 px-5 rounded-lg hover:bg-gray-200 transition-colors">إلغاء</button>
                    <button type="submit" class="bg-sky-600 text-white py-2 px-5 rounded-lg hover:bg-sky-700 transition-colors flex items-center">
                        <i data-lucide="save" class="w-5 h-5 ml-2"></i>
                        <span>حفظ البيانات</span>
                    </button>
                </div>
            </form>
        </div>
    </div>


    <script>
        window.onload = () => {
            lucide.createIcons();

            const traineesData = [
                { id: 1, name: 'علي محمد أحمد', email: 'ali.m@example.com', course: 'الرخصة الدولية (ICDL)', status: 'نشط', avatar: 'AM', joinDate: '2023-01-15', phone: '+967777111222', address: 'تعز - المظفر' },
                { id: 2, name: 'فاطمة الزهراء علي', email: 'fatima.a@example.com', course: 'لغة إنجليزية - متوسط', status: 'نشط', avatar: 'FZ', joinDate: '2023-02-10', phone: '+967777333444', address: 'تعز - القاهرة' },
                { id: 3, name: 'خالد وليد سعيد', email: 'khalid.w@example.com', course: 'تصميم جرافيك', status: 'مكتمل', avatar: 'KW', joinDate: '2022-11-20', phone: '+967777555666', address: 'إب - الظهار' },
                { id: 4, name: 'نورة ياسين قائد', email: 'noura.y@example.com', course: 'الرخصة الدولية (ICDL)', status: 'منسحب', avatar: 'NY', joinDate: '2023-01-15', phone: '+967777777888', address: 'تعز - صالة' },
                { id: 5, name: 'عبدالرحمن طه', email: 'abdul.t@example.com', course: 'صيانة حاسوب', status: 'نشط', avatar: 'AT', joinDate: '2023-03-01', phone: '+967777999000', address: 'صنعاء - حدة' },
                { id: 6, name: 'سارة عبدالله', email: 'sara.a@example.com', course: 'لغة إنجليزية - متقدم', status: 'مكتمل', avatar: 'SA', joinDate: '2022-10-05', phone: '+967777123456', address: 'عدن - المنصورة' }
            ];

            const trainersData = [
                { id: 1, name: 'د. عصام الشميري', specialty: 'علوم الحاسوب', courses: 5, trainees: 120, avatar: 'ES', email: 'essam.s@ebdaa.com', phone: '+967771231231' },
                { id: 2, name: 'أ. ليلى الأغبري', specialty: 'اللغة الإنجليزية وآدابها', courses: 8, trainees: 250, avatar: 'LA', email: 'laila.a@ebdaa.com', phone: '+967774564564' },
                { id: 3, name: 'م. فارس نعمان', specialty: 'تصميم وهندسة برمجيات', courses: 3, trainees: 85, avatar: 'FN', email: 'fares.n@ebdaa.com', phone: '+967777897897' },
            ];
            
            const coursesData = [
                { title: 'الرخصة الدولية لقيادة الحاسوب (ICDL)', category: 'علوم الحاسوب', trainer: 'د. عصام الشميري', trainees: 45, duration: '7 أسابيع', icon: 'monitor' },
                { title: 'محادثة متقدمة باللغة الإنجليزية', category: 'اللغة الإنجليزية', trainer: 'أ. ليلى الأغبري', trainees: 28, duration: '6 أسابيع', icon: 'message-circle' },
                { title: 'أساسيات التصميم الجرافيكي', category: 'علوم الحاسوب', trainer: 'م. فارس نعمان', trainees: 35, duration: '8 أسابيع', icon: 'figma' },
                { title: 'صيانة الحاسوب المتقدمة', category: 'علوم الحاسوب', trainer: 'د. عصام الشميري', trainees: 22, duration: '5 أسابيع', icon: 'wrench' }
            ];

            const adminBodyData = [
                { name: 'عبدالباسط اليوسفي', role: 'المدير العام', permissions: ['إدارة كاملة للنظام'], avatar: 'AY' },
                { name: 'محمد عبدالله', role: 'مدير الشؤون الأكاديمية', permissions: ['إدارة المدربين', 'إدارة الدورات'], avatar: 'MA' },
                { name: 'سارة علي', role: 'مسؤولة التسجيل والقبول', permissions: ['إدارة المتدربين', 'إصدار التقارير'], avatar: 'SA' },
                { name: 'أحمد خالد', role: 'المدير المالي', permissions: ['إدارة الشؤون المالية'], avatar: 'AK' }
            ];

            const pageContent = document.getElementById('app-content');
            const pageTitle = document.getElementById('page-title');
            const pageSubtitle = document.getElementById('page-subtitle');
            
            const getStatusBadge = (status) => {
                switch (status) {
                    case 'نشط': return 'bg-green-100 text-green-800';
                    case 'مكتمل': return 'bg-sky-100 text-sky-800';
                    case 'منسحب': return 'bg-red-100 text-red-800';
                    default: return 'bg-gray-100 text-gray-800';
                }
            };
            
            const renderDashboard = () => {
                pageTitle.textContent = 'لوحة التحكم';
                pageSubtitle.textContent = 'نظرة عامة على أداء المنصة';
                pageContent.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-white p-6 rounded-xl shadow-sm flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500">إجمالي المتدربين</p>
                                <p class="text-3xl font-bold">342</p>
                            </div>
                            <div class="bg-sky-100 text-sky-600 p-3 rounded-full">
                                <i data-lucide="users" class="w-6 h-6"></i>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500">الدورات النشطة</p>
                                <p class="text-3xl font-bold">12</p>
                            </div>
                            <div class="bg-green-100 text-green-600 p-3 rounded-full">
                                <i data-lucide="book-open" class="w-6 h-6"></i>
                            </div>
                        </div>
                         <div class="bg-white p-6 rounded-xl shadow-sm flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500">إجمالي الإيرادات (شهري)</p>
                                <p class="text-3xl font-bold">12,500 <span class="text-lg text-gray-400">$</span></p>
                            </div>
                            <div class="bg-amber-100 text-amber-600 p-3 rounded-full">
                                <i data-lucide="trending-up" class="w-6 h-6"></i>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-500">الشهادات الصادرة</p>
                                <p class="text-3xl font-bold">280</p>
                            </div>
                            <div class="bg-indigo-100 text-indigo-600 p-3 rounded-full">
                                <i data-lucide="award" class="w-6 h-6"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-sm mt-6">
                        <h3 class="font-bold text-lg mb-4">محاور الرخصة الدولية لقيادة الحاسوب (ICDL)</h3>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-center">
                             <div class="bg-gray-50 p-4 rounded-lg"><i data-lucide="mouse-pointer-2" class="mx-auto h-8 w-8 text-sky-500 mb-2"></i><span class="text-sm font-semibold">أساسيات الحاسوب</span></div>
                            <div class="bg-gray-50 p-4 rounded-lg"><i data-lucide="globe" class="mx-auto h-8 w-8 text-sky-500 mb-2"></i><span class="text-sm font-semibold">أساسيات الإنترنت</span></div>
                            <div class="bg-gray-50 p-4 rounded-lg"><i data-lucide="file-text" class="mx-auto h-8 w-8 text-sky-500 mb-2"></i><span class="text-sm font-semibold">معالج النصوص</span></div>
                            <div class="bg-gray-50 p-4 rounded-lg"><i data-lucide="file-spreadsheet" class="mx-auto h-8 w-8 text-sky-500 mb-2"></i><span class="text-sm font-semibold">الجداول الإلكترونية</span></div>
                            <div class="bg-gray-50 p-4 rounded-lg"><i data-lucide="presentation" class="mx-auto h-8 w-8 text-sky-500 mb-2"></i><span class="text-sm font-semibold">العروض التقديمية</span></div>
                            <div class="bg-gray-50 p-4 rounded-lg"><i data-lucide="database" class="mx-auto h-8 w-8 text-sky-500 mb-2"></i><span class="text-sm font-semibold">قواعد البيانات</span></div>
                        </div>
                    </div>
                `;
            };

            const renderTrainees = () => {
                pageTitle.textContent = 'إدارة المتدربين';
                pageSubtitle.textContent = 'عرض وتعديل بيانات متدربي المنصة';
                pageContent.innerHTML = `
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex items-center space-x-2 space-x-reverse">
                            <button class="bg-white border rounded-lg px-4 py-2 text-sm font-semibold flex items-center"><i data-lucide="filter" class="w-4 h-4 ml-2"></i> تصفية</button>
                             <button class="bg-white border rounded-lg px-4 py-2 text-sm font-semibold flex items-center"><i data-lucide="upload" class="w-4 h-4 ml-2"></i> تصدير</button>
                        </div>
                        <button id="addTraineeBtn" class="bg-sky-600 text-white py-2 px-4 rounded-lg hover:bg-sky-700 transition-colors flex items-center">
                            <i data-lucide="plus" class="w-5 h-5 ml-2"></i>
                            <span>إضافة متدرب جديد</span>
                        </button>
                    </div>
                    <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                        <table class="w-full text-sm text-right text-gray-500">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3">اسم المتدرب</th>
                                    <th scope="col" class="px-6 py-3">الدورة المسجل بها</th>
                                    <th scope="col" class="px-6 py-3">الحالة</th>
                                    <th scope="col" class="px-6 py-3">إجراءات</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${traineesData.map(trainee => `
                                    <tr class="bg-white border-b hover:bg-gray-50">
                                        <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="h-10 w-10 rounded-full bg-sky-100 text-sky-600 flex items-center justify-center font-bold text-sm ml-3">${trainee.avatar}</div>
                                                <div>
                                                    <p>${trainee.name}</p>
                                                    <p class="text-xs text-gray-400">${trainee.email}</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4">${trainee.course}</td>
                                        <td class="px-6 py-4">
                                            <span class="px-2 py-1 text-xs font-semibold rounded-full ${getStatusBadge(trainee.status)}">${trainee.status}</span>
                                        </td>
                                        <td class="px-6 py-4 space-x-1 space-x-reverse">
                                            <button class="p-2 text-gray-400 hover:text-sky-500"><i data-lucide="edit" class="w-4 h-4"></i></button>
                                            <button class="p-2 text-gray-400 hover:text-green-500"><i data-lucide="eye" class="w-4 h-4"></i></button>
                                            <button class="p-2 text-gray-400 hover:text-red-500"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
                document.getElementById('addTraineeBtn').addEventListener('click', openTraineeModal);
            };
            
            const renderTrainers = () => {
                pageTitle.textContent = 'إدارة المدربين';
                pageSubtitle.textContent = 'قائمة المدربين المعتمدين في المنصة';
                pageContent.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${trainersData.map(trainer => `
                            <div class="bg-white rounded-xl shadow-sm p-6 text-center">
                                <div class="w-24 h-24 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-3xl mx-auto mb-4">${trainer.avatar}</div>
                                <h3 class="text-lg font-bold">${trainer.name}</h3>
                                <p class="text-sm text-gray-500 mb-4">${trainer.specialty}</p>
                                <div class="flex justify-around border-t pt-4">
                                    <div>
                                        <p class="font-bold text-lg">${trainer.courses}</p>
                                        <p class="text-xs text-gray-500">دورات</p>
                                    </div>
                                    <div>
                                        <p class="font-bold text-lg">${trainer.trainees}</p>
                                        <p class="text-xs text-gray-500">متدرب</p>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            };
            
             const renderCourses = () => {
                pageTitle.textContent = 'البرامج والدورات';
                pageSubtitle.textContent = 'قائمة البرامج التدريبية المتاحة في المنصة';
                pageContent.innerHTML = `
                     <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6">
                        ${coursesData.map(course => `
                           <div class="bg-white p-5 rounded-xl shadow-sm flex items-start space-x-4 space-x-reverse">
                               <div class="bg-sky-100 text-sky-600 p-4 rounded-lg">
                                   <i data-lucide="${course.icon}" class="w-8 h-8"></i>
                               </div>
                               <div>
                                   <p class="text-xs font-semibold text-sky-600 bg-sky-100 px-2 py-0.5 rounded-full inline-block mb-1">${course.category}</p>
                                   <h3 class="font-bold text-lg">${course.title}</h3>
                                   <div class="flex items-center text-sm text-gray-500 mt-2 space-x-4 space-x-reverse">
                                       <span class="flex items-center"><i data-lucide="user-check" class="w-4 h-4 ml-1"></i>${course.trainer}</span>
                                       <span class="flex items-center"><i data-lucide="users" class="w-4 h-4 ml-1"></i>${course.trainees} متدرب</span>
                                       <span class="flex items-center"><i data-lucide="clock" class="w-4 h-4 ml-1"></i>${course.duration}</span>
                                   </div>
                               </div>
                           </div>
                        `).join('')}
                    </div>
                `;
            };

            const renderFinance = () => {
                pageTitle.textContent = 'الشؤون المالية';
                pageSubtitle.textContent = 'إدارة الإيرادات والمصروفات والتقارير المالية';
                pageContent.innerHTML = `<div class="bg-white p-6 rounded-xl shadow-sm text-center"><p>صفحة الشؤون المالية - سيتم تصميمها قريباً.</p></div>`;
            }

            const renderAdminBody = () => {
                pageTitle.textContent = 'الهيئة الإدارية';
                pageSubtitle.textContent = 'أعضاء الإدارة وصلاحياتهم';
                pageContent.innerHTML = `
                    <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                        <table class="w-full text-sm text-right text-gray-500">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3">الاسم</th>
                                    <th scope="col" class="px-6 py-3">المنصب</th>
                                    <th scope="col" class="px-6 py-3">الصلاحيات الممنوحة</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${adminBodyData.map(admin => `
                                    <tr class="bg-white border-b hover:bg-gray-50">
                                        <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="h-10 w-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-sm ml-3">${admin.avatar}</div>
                                                <div>
                                                    <p>${admin.name}</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 font-semibold">${admin.role}</td>
                                        <td class="px-6 py-4">
                                            <div class="flex flex-wrap gap-2">
                                                ${admin.permissions.map(p => `<span class="px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-700">${p}</span>`).join('')}
                                            </div>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            };
            
            const renderSettings = () => {
                pageTitle.textContent = 'الإعدادات';
                pageSubtitle.textContent = 'إدارة إعدادات النظام العامة';
                pageContent.innerHTML = `<div class="bg-white p-6 rounded-xl shadow-sm text-center"><p>صفحة الإعدادات - سيتم تصميمها قريباً.</p></div>`;
            }

            const pageRenderers = {
                dashboard: renderDashboard,
                trainees: renderTrainees,
                trainers: renderTrainers,
                courses: renderCourses,
                finance: renderFinance,
                'admin-body': renderAdminBody,
                settings: renderSettings
            };

            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            sidebarLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = link.dataset.page;
                    
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');

                    if(pageRenderers[page]) {
                        pageRenderers[page]();
                    }
                    
                    lucide.createIcons();
                });
            });

            // Trainee Modal Logic
            const traineeModal = document.getElementById('traineeModal');
            const closeTraineeModalBtn = document.getElementById('closeTraineeModalBtn');
            const cancelTraineeModalBtn = document.getElementById('cancelTraineeModalBtn');

            const openTraineeModal = () => traineeModal.classList.add('visible');
            const closeTraineeModal = () => traineeModal.classList.remove('visible');

            closeTraineeModalBtn.addEventListener('click', closeTraineeModal);
            cancelTraineeModalBtn.addEventListener('click', closeTraineeModal);
            traineeModal.addEventListener('click', (e) => {
                if (e.target === traineeModal) {
                    closeTraineeModal();
                }
            });

            // Initial render
            renderDashboard();
            lucide.createIcons();
        };
    </script>
</body>
</html>
