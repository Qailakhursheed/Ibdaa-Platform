<!-- 
    ğŸ¨ Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹ - Ù†Ø¸Ø§Ù… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±
    Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù„Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø¬Ù‡Ø© Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ dashboard Ø§Ù„Ø·Ø§Ù„Ø¨
-->

<!-- ====================================== -->
<!-- Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 1: Include Ù…Ø¨Ø§Ø´Ø± (Ø§Ù„Ø£Ø³Ù‡Ù„) -->
<!-- ====================================== -->

<!-- ÙÙŠ student-dashboard.php Ø£Ùˆ Ø£ÙŠ ØµÙØ­Ø© Ø·Ø§Ù„Ø¨ -->
<div class="container mx-auto px-4 py-8">
    <div class="max-w-2xl mx-auto">
        <?php include __DIR__ . '/../components/photo_upload_widget.html'; ?>
    </div>
</div>


<!-- ====================================== -->
<!-- Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 2: ÙÙŠ Tab Ù…Ù†ÙØµÙ„ -->
<!-- ====================================== -->

<!-- ÙÙŠ student-dashboard.php Ø¯Ø§Ø®Ù„ Ù‚Ø³Ù… Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
<div id="photo-tab" class="tab-content hidden">
    <?php include __DIR__ . '/../components/photo_upload_widget.html'; ?>
</div>


<!-- ====================================== -->
<!-- Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 3: Modal Ù…Ù†Ø¨Ø«Ù‚ -->
<!-- ====================================== -->

<!-- Button Ù„ÙØªØ­ Modal -->
<button onclick="openPhotoModal()" 
        class="px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold hover:shadow-lg transition-all">
    <svg class="w-5 h-5 inline-block ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
              d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
    </svg>
    ØªØ­Ø¯ÙŠØ« ØµÙˆØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©
</button>

<!-- Modal -->
<div id="photo-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-gray-800">ØµÙˆØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©</h2>
                <button onclick="closePhotoModal()" class="text-gray-500 hover:text-gray-700" aria-label="Ø¥ØºÙ„Ø§Ù‚" title="Ø¥ØºÙ„Ø§Ù‚">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <?php include __DIR__ . '/../components/photo_upload_widget.html'; ?>
        </div>
    </div>
</div>

<script>
function openPhotoModal() {
    document.getElementById('photo-modal').classList.remove('hidden');
}

function closePhotoModal() {
    document.getElementById('photo-modal').classList.add('hidden');
}

// Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Modal
document.getElementById('photo-modal').addEventListener('click', function(e) {
    if (e.target === this) {
        closePhotoModal();
    }
});
</script>


<!-- ====================================== -->
<!-- Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 4: ÙÙŠ Sidebar Profile -->
<!-- ====================================== -->

<!-- ÙÙŠ sidebar Ø§Ù„Ø·Ø§Ù„Ø¨ -->
<div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
    <div class="text-center mb-4">
        <img id="sidebar-profile-photo" 
             src="<?php echo !empty($_SESSION['user_photo']) ? '../../' . $_SESSION['user_photo'] : '../assets/default-avatar.png'; ?>" 
             alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ"
             class="w-32 h-32 rounded-full mx-auto object-cover border-4 border-blue-200">
        <h3 class="mt-3 text-xl font-bold text-gray-800">
            <?php echo $_SESSION['user_name'] ?? 'Ø§Ù„Ø·Ø§Ù„Ø¨'; ?>
        </h3>
        <p class="text-gray-600 text-sm">
            <?php echo $_SESSION['user_email'] ?? ''; ?>
        </p>
    </div>
    
    <button onclick="showPhotoUploader()" 
            class="w-full px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:shadow-lg transition-all text-sm font-semibold">
        ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±Ø©
    </button>
</div>

<!-- Container Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© (Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©) -->
<div id="photo-uploader-container" class="hidden">
    <?php include __DIR__ . '/../components/photo_upload_widget.html'; ?>
</div>

<script>
function showPhotoUploader() {
    const container = document.getElementById('photo-uploader-container');
    container.classList.toggle('hidden');
}

// ØªØ­Ø¯ÙŠØ« ØµÙˆØ±Ø© Ø§Ù„Ù€ sidebar Ø¹Ù†Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„Ø±ÙØ¹
document.addEventListener('photoUploaded', function(e) {
    const newPhotoUrl = e.detail.photo_url;
    document.getElementById('sidebar-profile-photo').src = newPhotoUrl + '?' + Date.now();
});
</script>


<!-- ====================================== -->
<!-- Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 5: ÙÙŠ Settings Page -->
<!-- ====================================== -->

<!-- ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø·Ø§Ù„Ø¨ -->
<div class="settings-container">
    <!-- Personal Information Section -->
    <div class="section mb-8">
        <h2 class="text-2xl font-bold mb-4">Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</h2>
        
        <!-- Photo Upload Widget -->
        <div class="mb-6">
            <?php include __DIR__ . '/../components/photo_upload_widget.html'; ?>
        </div>
        
        <!-- Other Settings -->
        <form action="update_profile.php" method="POST">
            <!-- Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ØŒ Ø¥Ù„Ø®... -->
        </form>
    </div>
</div>


<!-- ====================================== -->
<!-- Ù†ØµØ§Ø¦Ø­ Ø§Ù„ØªÙƒØ§Ù…Ù„ -->
<!-- ====================================== -->

<!--
âœ… ØªØ£ÙƒØ¯ Ù…Ù†:
1. Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ù…Ù„Ù (../components/photo_upload_widget.html)
2. ÙˆØ¬ÙˆØ¯ Tailwind CSS ÙÙŠ Ø§Ù„ØµÙØ­Ø© (Ù„Ù„ØªØµÙ…ÙŠÙ…)
3. ØªØ¶Ù…ÙŠÙ† jQuery Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ³ØªØ®Ø¯Ù…Ù‡ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)

âœ… Events Ù…Ø®ØµØµØ©:
- 'photoUploaded': ÙŠÙØ·Ù„Ù‚ Ø¹Ù†Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„Ø±ÙØ¹
- 'photoProcessed': ÙŠÙØ·Ù„Ù‚ Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
- 'photoError': ÙŠÙØ·Ù„Ù‚ Ø¹Ù†Ø¯ Ø­Ø¯ÙˆØ« Ø®Ø·Ø£

Ù…Ø«Ø§Ù„:
document.addEventListener('photoUploaded', function(e) {
    console.log('New photo:', e.detail.photo_url);
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
});

âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… API Ù…Ø¨Ø§Ø´Ø±Ø© (Ø¨Ø¯ÙˆÙ† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©):
fetch('../api/photo_background_remover.php?action=get_photo')
    .then(r => r.json())
    .then(data => {
        if (data.has_photo) {
            console.log('Photo:', data.photo_url);
        }
    });
-->


<!-- ====================================== -->
<!-- Ù…Ø«Ø§Ù„ ÙƒØ§Ù…Ù„: Student Dashboard -->
<!-- ====================================== -->

<!--
Example code for student-dashboard.php:

// ÙÙŠ student-dashboard.php

session_start();
require_once '../config/database.php';

if (!isset($_SESSION['user_id']) || $_SESSION['user_role'] !== 'student') {
    header('Location: ../login.php');
    exit;
}

$user_id = $_SESSION['user_id'];

// Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ù…Ø§ ÙÙŠÙ‡Ø§ Ø§Ù„ØµÙˆØ±Ø©
$stmt = $conn->prepare('SELECT full_name, email, photo FROM users WHERE id = ?');
$stmt->bind_param('i', $user_id);
$stmt->execute();
$user = $stmt->get_result()->fetch_assoc();
<body class="bg-gray-50">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="bg-white shadow-sm">
            <div class="container mx-auto px-4 py-4 flex justify-between items-center">
                <h1 class="text-2xl font-bold text-gray-800">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ <?php echo htmlspecialchars($user['full_name']); ?></h1>
                <img src="<?php echo !empty($user['photo']) ? '../../' . $user['photo'] : '../assets/default-avatar.png'; ?>" 
                     alt="ØµÙˆØ±ØªÙƒ" 
                     class="w-12 h-12 rounded-full object-cover border-2 border-blue-500">
            </div>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Sidebar -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <div class="text-center">
                            <img src="<?php echo !empty($user['photo']) ? '../../' . $user['photo'] : '../assets/default-avatar.png'; ?>" 
                                 alt="ØµÙˆØ±ØªÙƒ" 
                                 class="w-32 h-32 rounded-full mx-auto object-cover border-4 border-blue-200 mb-4">
                            <h3 class="text-xl font-bold"><?php echo htmlspecialchars($user['full_name']); ?></h3>
                            <p class="text-gray-600 text-sm"><?php echo htmlspecialchars($user['email']); ?></p>
                        </div>
                    </div>
                </div>

                <!-- Main Content Area -->
                <div class="lg:col-span-2">
                    <!-- Photo Upload Section -->
                    <div class="mb-8">
                        <?php include __DIR__ . '/../components/photo_upload_widget.html'; ?>
                    </div>

                    <!-- Other Dashboard Content -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h2 class="text-xl font-bold mb-4">Ø¯ÙˆØ±Ø§ØªÙŠ</h2>
                        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Øª -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ± ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø±ÙØ¹ Ø§Ù„Ù†Ø§Ø¬Ø­
    document.addEventListener('DOMContentLoaded', function() {
        // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹Ø§Øª Ù„Ù„Ø£Ø­Ø¯Ø§Ø« Ù‡Ù†Ø§
    });
    </script>
</body>
</html>

<?php
$stmt->close();
$conn->close();
*/
?>
<!--
$stmt->close();
$conn->close();
-->
