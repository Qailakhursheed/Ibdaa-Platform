# ูุธุงู ุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุชุณุฌูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ูุงูู ูุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุชุณุฌูู ุงููุงุฑุฏุฉ ูู ูููุฐุฌ ุงูุชูุฏูู ุงูุนุงูุ ูุน ุฅููุงููุฉ ุงูููุงููุฉ ุฃู ุงูุฑูุถ ูู ููุญุฉ ุชุญูู ุงููุฏูุฑ.

---

## ๐ฏ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. **ุนุฑุถ ุงูุทูุจุงุช ุงููุนููุฉ**
- ุนุฑุถ ุฌููุน ุงูุทูุจุงุช ุจุญุงูุฉ "ูุนูู" (Pending)
- ูุนูููุงุช ููุตูุฉ: ุงูุงุณูุ ุงููุงุชูุ ุงูุฅููููุ ุงูุฏูุฑุฉ ุงููุทููุจุฉ
- ุฑุงุจุท ูุนุฑุถ ููู ุงููููุฉ ุงููุฑูู

### 2. **ุงูููุงููุฉ ุนูู ุงูุทูุจุงุช**
ุนูุฏ ุงูููุงููุฉ ุนูู ุทูุจ:
- โ **ุฅูุดุงุก ุญุณุงุจ ูุณุชุฎุฏู ุฌุฏูุฏ** (ุฅุฐุง ูู ููู ููุฌูุฏุงู)
  - ุงูุฅูููู ูู ุงูุทูุจ
  - ูููุฉ ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ = ุฑูู ุงููุงุชู
  - ุงูุฏูุฑ: `student`
- โ **ุชุณุฌูู ุงูุทุงูุจ ูู ุงูุฏูุฑุฉ** (ุฌุฏูู `enrollments`)
- โ **ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ** ุฅูู "ููุงูู ุนููู"
- โ **ุนุฑุถ ูููุฉ ุงููุฑูุฑ** ูููุฏูุฑ ูุฅุฎุจุงุฑ ุงูุทุงูุจ ุจูุง

### 3. **ุฑูุถ ุงูุทูุจุงุช**
- ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ ุฅูู "ูุฑููุถ"
- ุฅุฎูุงุก ุงูุทูุจ ูู ูุงุฆูุฉ ุงูุทูุจุงุช ุงููุนููุฉ

---

## ๐๏ธ ุงููููุงุช ุงููุถุงูุฉ/ุงููุนุฏูุฉ

### 1. **ูุงุนุฏุฉ ุงูุจูุงูุงุช**
- `database/requests_announcements.sql`
  - ุฌุฏูู `requests`: ูุญุชูู ุนูู ุทูุจุงุช ุงูุชุณุฌูู
  - ุฌุฏูู `announcements`: ููุฅุนูุงูุงุช

### 2. **ูุงุฌูุฉ ุงููุฏูุฑ**
- `Manager/dashboard.php`
  - ุฑุงุจุท ุฌุฏูุฏ ูู ุงูุดุฑูุท ุงูุฌุงูุจู: "ุทูุจุงุช ุงูุชุณุฌูู"
  - ุฏุงูุฉ `renderRequests()`: ุนุฑุถ ุงูุทูุจุงุช ูู ุฌุฏูู ููุณู
  - ุฏุงูุฉ `handleRequest()`: ูุนุงูุฌุฉ ุงูููุงููุฉ/ุงูุฑูุถ

### 3. **ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (APIs)**
- `Manager/api/get_requests.php`
  - ุฌูุจ ุงูุทูุจุงุช ุญุณุจ ุงูุญุงูุฉ (pending, approved, rejected, all)
  - ูุญูู ุจูุตุงุฏูุฉ ุงููุฏูุฑ/ุงููุดุฑู ุงูููู
  
- `Manager/api/manage_enrollments.php`
  - ูุนุงูุฌุฉ ุงูููุงููุฉ/ุงูุฑูุถ
  - ุฅูุดุงุก ูุณุชุฎุฏู ูุชุณุฌููู ูู ุงูุฏูุฑุฉ (ูุน Transactions)

### 4. **ูุนุงูุฌ ูููุฐุฌ ุงูุชูุฏูู**
- `apply.php`
  - ุงุณุชูุจุงู ุจูุงูุงุช ูููุฐุฌ ุงูุชูุฏูู
  - ุฑูุน ููู ุงููููุฉ ุฅูู `uploads/ids/`
  - ุฅุฏุฑุงุฌ ุงูุทูุจ ูู ุฌุฏูู `requests`

---

## ๐ ุฏููู ุงูุงุณุชุฎุฏุงู

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุงูุฌุฏุงูู

**ุจุงุณุชุฎุฏุงู phpMyAdmin:**
1. ุงูุชุญ http://localhost/phpmyadmin
2. ุงุฎุชุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช `ibdaa_platform`
3. ุงุฐูุจ ุฅูู ุชุจููุจ "Import" (ุงุณุชูุฑุงุฏ)
4. ุงุฎุชุฑ ุงูููู: `database/requests_announcements.sql`
5. ุงุถุบุท "Go" (ุชูููุฐ)

**ุฃู ุจุงุณุชุฎุฏุงู ุณุทุฑ ุงูุฃูุงูุฑ:**
```powershell
C:\xampp\mysql\bin\mysql.exe -u root ibdaa_platform < "C:\xampp\htdocs\Ibdaa-Taiz\database\requests_announcements.sql"
```

### ุงูุฎุทูุฉ 2: ุฅูุดุงุก ุฏูุฑุฉ ุชุฌุฑูุจูุฉ (ุงุฎุชูุงุฑู)

```powershell
php "C:\xampp\htdocs\Ibdaa-Taiz\database\seed_sample_course.php"
```

### ุงูุฎุทูุฉ 3: ุฅูุดุงุก ุญุณุงุจุงุช ุงููุณุคูููู

1. ุงูุชุญ ุงููุชุตูุญ ุนูู: http://localhost/Ibdaa-Taiz/Manager/create_admin.php
2. ุงูุณุฎ ุจูุงูุงุช ุงูุฏุฎูู
3. **ุงุญุฐู ุงูููู ููุฑุงู ุจุนุฏ ุงูุงุณุชุฎุฏุงู** (ุฃููู)

### ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ ุงููุธุงู

#### ุฃ. ุชูุฏูู ุทูุจ ุฌุฏูุฏ:
1. ุงูุชุญ: http://localhost/Ibdaa-Taiz/platform/application.php
2. ุงููุฃ ุงููููุฐุฌ ูุฃุฑูู ููู ูููุฉ
3. ุฃุฑุณู ุงูุทูุจ

#### ุจ. ูุฑุงุฌุนุฉ ุงูุทูุจุงุช:
1. ุณุฌู ุฏุฎูู ุฅูู ููุญุฉ ุงููุฏูุฑ
2. ุงูุชุญ: http://localhost/Ibdaa-Taiz/Manager/dashboard.php
3. ุงุถุบุท ุนูู "ุทูุจุงุช ุงูุชุณุฌูู" ูู ุงูุดุฑูุท ุงูุฌุงูุจู
4. ุดุงูุฏ ุงูุทูุจุงุช ุงููุนููุฉ

#### ุฌ. ุงูููุงููุฉ/ุงูุฑูุถ:
- ุงุถุบุท ุฒุฑ **"ููุงููุฉ"** โ ุณูุชู:
  - ุฅูุดุงุก ุญุณุงุจ ููุทุงูุจ
  - ุชุณุฌููู ูู ุงูุฏูุฑุฉ
  - ุนุฑุถ ูููุฉ ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ
  
- ุงุถุบุท ุฒุฑ **"ุฑูุถ"** โ ุณูุชู:
  - ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ ุฅูู "ูุฑููุถ"
  - ุฅุฎูุงุก ุงูุทูุจ ูู ุงููุงุฆูุฉ

---

## ๐ ุงูุฃูุงู

### ุงูุชุญุณููุงุช ุงูููุฌูุฏุฉ:
- โ ูุญุต ุตูุงุญูุงุช ุงููุณุชุฎุฏู (manager/technical ููุท)
- โ ุงุณุชุฎุฏุงู Prepared Statements ูููุน SQL Injection
- โ ุงุณุชุฎุฏุงู Transactions ูุถูุงู ุณูุงูุฉ ุงูุจูุงูุงุช
- โ SELECT ... FOR UPDATE ูููุน Race Conditions

### ุชุญุณููุงุช ููุชุฑุญุฉ ููุฅูุชุงุฌ:
- โ๏ธ ุฅุถุงูุฉ ุฑููุฒ CSRF ููุญูุงูุฉ ูู ูุฌูุงุช Cross-Site Request Forgery
- โ๏ธ ูุญุต ููุน ูุญุฌู ุงูููู ุงููุฑููุน (ID)
- โ๏ธ ููู ูุฌูุฏ uploads ุฎุงุฑุฌ ุงููุณุงุฑ ุงูุนุงู (web root)
- โ๏ธ ุชุดููุฑ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
- โ๏ธ ุฅุถุงูุฉ ุณุฌู Audit Trail ูุชุชุจุน ุงูุฅุฌุฑุงุกุงุช

---

## ๐ ูููู ุงูุฌุฏุงูู

### ุฌุฏูู `requests`:
```sql
- request_id (PK)
- full_name
- phone
- email
- course_name
- governorate
- district
- id_file_path
- notes
- status (ENUM: pending, approved, rejected)
- request_date
```

### ุฌุฏูู `announcements`:
```sql
- ann_id (PK)
- title
- content
- course_id (FK, nullable)
- created_by (FK, nullable)
- created_at
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุทูุจุงุช ูุง ุชุธูุฑ:
1. ุชุฃูุฏ ูู ุชูููุฐ SQL (ุฅูุดุงุก ุฌุฏูู requests)
2. ุชุญูู ูู ูุฌูุฏ ุทูุจุงุช ุจุญุงูุฉ "pending" ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุงูุชุญ Console ูู ุงููุชุตูุญ (F12) ูุชุญูู ูู ุฃุฎุทุงุก JavaScript

### ุฎุทุฃ "ุงูุฏูุฑุฉ ุบูุฑ ููุฌูุฏุฉ":
1. ุชุฃูุฏ ูู ูุฌูุฏ ุฏูุฑุงุช ูู ุฌุฏูู `courses`
2. ูู ุจุชุดุบูู `seed_sample_course.php` ูุฅูุดุงุก ุฏูุฑุฉ ุชุฌุฑูุจูุฉ
3. ุชุฃูุฏ ูู ุฃู ุงุณู ุงูุฏูุฑุฉ ูู ุงูุทูุจ ูุทุงุจู ูุงุณููุง ูู ุฌุฏูู courses

### ุฎุทุฃ "ูุดู ุฑูุน ุงูููู":
1. ุชุฃูุฏ ูู ูุฌูุฏ ูุฌูุฏ `uploads/ids/` ูุฃูู ูุงุจู ูููุชุงุจุฉ
2. ุชุญูู ูู ุฅุนุฏุงุฏุงุช PHP (upload_max_filesize, post_max_size)
3. ุชุญูู ูู ุตูุงุญูุงุช ุงููุฌูุฏ (chmod 755 ุฃู 777)

---

## ๐ ููุงุญุธุงุช ุชุทููุฑูุฉ

### ูุชุบูุฑุงุช ุงูุฌูุณุฉ ุงููุณุชุฎุฏูุฉ:
- `$_SESSION['user_id']`: ูุนุฑู ุงููุณุชุฎุฏู
- `$_SESSION['user_role']`: ุฏูุฑ ุงููุณุชุฎุฏู (manager, technical, student, trainer)
- `$_SESSION['user_name']`: ุงุณู ุงููุณุชุฎุฏู
- `$_SESSION['user_email']`: ุฅูููู ุงููุณุชุฎุฏู

### ุงุณุชุฌุงุจุฉ API ุงููููุฐุฌูุฉ:

**ูุฌุงุญ:**
```json
{
  "success": true,
  "message": "ุชูุช ุงูููุงููุฉ...",
  "user_id": 123,
  "password": "0770123456"
}
```

**ูุดู:**
```json
{
  "success": false,
  "message": "ุงูุฏูุฑุฉ ุบูุฑ ููุฌูุฏุฉ"
}
```

---

## ๐จโ๐ป ุงูุชุทููุฑ ุงููุณุชูุจูู

- [ ] ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุนูุฏ ุงูููุงููุฉ/ุงูุฑูุถ
- [ ] ุฅุถุงูุฉ ุตูุญุฉ ูุนุฑุถ ุงูุทูุจุงุช ุงูููุงูู ุนูููุง ูุงููุฑููุถุฉ
- [ ] ุฅุถุงูุฉ ููุงุชุฑ ุจุญุซ ูุชุตููุฉ ูุชูุฏูุฉ
- [ ] ุฅุถุงูุฉ ููุงุญุธุงุช ูููุฏูุฑ ุนูู ูู ุทูุจ
- [ ] ุฅุถุงูุฉ ุชุตุฏูุฑ ุงูุทูุจุงุช ุฅูู Excel/PDF
- [ ] ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช (ุนุฏุฏ ุงูุทูุจุงุช ุงููุนููุฉ/ุงูููุงููุฉ/ุงููุฑููุถุฉ)

---

## ๐ง ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงููุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.

---

**ุขุฎุฑ ุชุญุฏูุซ:** ููููุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 1.0.0
