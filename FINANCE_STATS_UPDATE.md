# ๐ ุชูุฑูุฑ ุชุญุฏูุซ ูุธุงู ุงููุงููุฉ ูุงูุฅุญุตุงุฆูุงุช
**ููุตุฉ ุฅุจุฏุงุน ููุชุฏุฑูุจ - Ibdaa Training Platform**

## ๐ ููุฎุต ุงูุชุญุฏูุซุงุช

ุชู ุฅุตูุงุญ ุงูุจูุงูุงุช ุงูููููุฉ ูู ููุญุฉ ุงูุชุญูู ูุจูุงุก ูุธุงู ูุงููุฉ ูุชูุงูู.

---

## โ ุงูุชุญุฏูุซุงุช ุงููููุฐุฉ

### 1๏ธโฃ ุฅุตูุงุญ ุงูุฅุญุตุงุฆูุงุช ูู ููุญุฉ ุงูุชุญูู

#### ูุจู ุงูุชุญุฏูุซ:
```javascript
// ูุงูุช ุงูุจูุงูุงุช ุซุงุจุชุฉ (ููููุฉ)
<p class="text-3xl font-bold">12500</p>  // ุฅุฌูุงูู ุงููุชุฏุฑุจูู
<p class="text-3xl font-bold">280</p>    // ุงูุฏูุฑุงุช ุงููุดุทุฉ
```

#### ุจุนุฏ ุงูุชุญุฏูุซ:
```php
// ุงูุขู ุชุฌูุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
$dashboardStats = [
    'total_trainees' => 0,
    'active_courses' => 0,
    'total_revenue' => 0,
    'certs_issued' => 0
];

$stats_response = @file_get_contents(__DIR__ . '/api/get_dashboard_stats.php');
if ($stats_response) {
    $stats_data = json_decode($stats_response, true);
    if (isset($stats_data['success']) && $stats_data['success']) {
        $dashboardStats = array_merge($dashboardStats, $stats_data['stats']);
    }
}
```

---

### 2๏ธโฃ ุฅูุดุงุก API ููุฅุญุตุงุฆูุงุช ุงูุญููููุฉ

๐ **ููู**: `Manager/api/get_dashboard_stats.php`

**ุงููุธุงุฆู:**
- ุญุณุงุจ ุฅุฌูุงูู ุงููุชุฏุฑุจูู: `COUNT(*) FROM users WHERE role='student'`
- ุญุณุงุจ ุงูุฏูุฑุงุช ุงููุดุทุฉ: `COUNT(*) FROM courses WHERE status='active'`
- ุญุณุงุจ ุงูุฅูุฑุงุฏุงุช: `SUM(amount) FROM payments WHERE status='completed'`
- ุญุณุงุจ ุงูุดูุงุฏุงุช ุงูุตุงุฏุฑุฉ: `COUNT(*) FROM enrollments/grades WHERE completed`

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "stats": {
    "total_trainees": 245,
    "active_courses": 18,
    "total_revenue": 45600.00,
    "certs_issued": 128
  }
}
```

---

### 3๏ธโฃ ุฅูุดุงุก ุฌุฏูู ุงูุฏูุนุงุช (Payments)

๐ **ููู**: `database/payments.sql`

**ุงูุญููู:**
- `payment_id` - ูุนุฑู ูุฑูุฏ (Primary Key)
- `user_id` - ูุนุฑู ุงูุทุงูุจ (Foreign Key โ users.id)
- `course_id` - ูุนุฑู ุงูุฏูุฑุฉ (Foreign Key โ courses.course_id)
- `amount` - ุงููุจูุบ (DECIMAL)
- `payment_method` - ุทุฑููุฉ ุงูุฏูุน (cash, bank, online)
- `status` - ุงูุญุงูุฉ (pending, completed, cancelled)
- `payment_date` - ุชุงุฑูุฎ ุงูุฏูุน
- `notes` - ููุงุญุธุงุช
- `processed_by` - ูุนุงูุฌ ูู ูุจู (Foreign Key โ users.id)

**ููููุฉ ุงูุชุทุจูู:**
```sql
-- ุชูููุฐ ูู phpMyAdmin ุฃู MySQL command line
SOURCE database/payments.sql;
```

---

### 4๏ธโฃ ุฅูุดุงุก API ูุฅุฏุงุฑุฉ ุงููุงููุฉ

๐ **ููู**: `Manager/api/manage_finance.php`

#### ุงูุตูุงุญูุงุช:
```php
// ูุชุงุญ ููุฏุนู ุงูููู ููุท
if ($user_role !== 'technical') {
    echo json_encode(['success'=>false,'message'=>'ุบูุฑ ูุตุฑุญ ูู']);
    exit;
}
```

#### ุงููุธุงุฆู ุงููุชุงุญุฉ:

**1. ุฌูุจ ุฌููุน ุงูุฏูุนุงุช (GET):**
```
GET api/manage_finance.php
```
Response:
```json
{
  "success": true,
  "data": [
    {
      "payment_id": 1,
      "amount": 500.00,
      "payment_method": "cash",
      "status": "completed",
      "student_name": "ูุญูุฏ ุนูู",
      "course_title": "ICDL"
    }
  ],
  "summary": {
    "total_revenue": 45600.00,
    "total_payments": 245,
    "avg_payment": 186.12
  }
}
```

**2. ุชูุฑูุฑ ุดูุฑู (GET):**
```
GET api/manage_finance.php?report=monthly&year=2024
```
Response:
```json
{
  "success": true,
  "data": [
    {"month": 1, "year": 2024, "total": 3200.00, "count": 18},
    {"month": 2, "year": 2024, "total": 4500.00, "count": 22}
  ]
}
```

**3. ุฅุถุงูุฉ ุฏูุนุฉ (POST):**
```json
POST api/manage_finance.php
{
  "action": "add_payment",
  "user_id": 15,
  "course_id": 3,
  "amount": 500.00,
  "payment_method": "cash",
  "payment_date": "2024-01-15",
  "notes": "ุฏูุนุฉ ูุงููุฉ"
}
```

**4. ุชุญุฏูุซ ุฏูุนุฉ (POST):**
```json
POST api/manage_finance.php
{
  "action": "update",
  "payment_id": 5,
  "amount": 550.00,
  "status": "completed",
  "notes": "ุชู ุงูุชุญุฏูุซ"
}
```

**5. ุญุฐู ุฏูุนุฉ (POST):**
```json
POST api/manage_finance.php
{
  "action": "delete",
  "payment_id": 5
}
```

---

### 5๏ธโฃ ุจูุงุก ุตูุญุฉ ุงูุดุคูู ุงููุงููุฉ ุงููุงููุฉ

๐ **ููู**: `Manager/dashboard.php` โ ุฏุงูุฉ `renderFinance()`

#### ุงููููุฒุงุช:

**1. ุจุทุงูุงุช ุงูุฅุญุตุงุฆูุงุช:**
- ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช
- ุนุฏุฏ ุงูุฏูุนุงุช
- ูุชูุณุท ุงูุฏูุนุฉ

**2. ุฑุณู ุจูุงูู ุชูุงุนูู (Chart.js):**
```javascript
// ุฑุณู ุจูุงูู ููุฅูุฑุงุฏุงุช ุงูุดูุฑูุฉ
const ctx = document.getElementById('revenueChart');
new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['ููุงูุฑ','ูุจุฑุงูุฑ','ูุงุฑุณ',...],
        datasets: [{
            label: 'ุงูุฅูุฑุงุฏุงุช ($)',
            data: [3200, 4500, 5100, ...]
        }]
    }
});
```

**3. ุฌุฏูู ุงูุฏูุนุงุช:**
- ุนุฑุถ ุฌููุน ุงูุฏูุนุงุช ูุน:
  - ุงุณู ุงูุทุงูุจ
  - ุงูุฏูุฑุฉ ุงููุณุฌู ุจูุง
  - ุงููุจูุบ
  - ุทุฑููุฉ ุงูุฏูุน
  - ุงูุชุงุฑูุฎ
  - ุงูุญุงูุฉ
- ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช:
  - ุชุนุฏูู
  - ุญุฐู

**4. ุฒุฑ ุฅุถุงูุฉ ุฏูุนุฉ ุฌุฏูุฏุฉ**

---

### 6๏ธโฃ ุฅุถุงูุฉ ููุชุจุฉ Chart.js

ุชู ุฅุถุงูุฉ Chart.js ูุฑุณู ุงูุฑุณูู ุงูุจูุงููุฉ:
```html
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
```

---

## ๐ ุงูุตูุงุญูุงุช

### ุงูุฏุนู ุงูููู (technical):
โ ุงููุตูู ุงููุงูู ููุดุคูู ุงููุงููุฉ
โ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงูุฏูุนุงุช
โ ูุดุงูุฏุฉ ุงูุชูุงุฑูุฑ ุงููุงููุฉ
โ ุชุตุฏูุฑ ุงูุจูุงูุงุช

### ุงููุฏูุฑ (manager):
โ๏ธ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ููุท (ูุธุฑุฉ ุนุงูุฉ)
โ ูุง ููููู ุงูุชุนุฏูู ุนูู ุงููุงููุฉ

---

## ๐ ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู

### 1. ุฅุถุงูุฉ ุฏูุนุฉ ุฌุฏูุฏุฉ:
```javascript
// ูู ููุญุฉ ุงูุชุญูู - ูุณู ุงูุดุคูู ุงููุงููุฉ
// ุงูุถุบุท ุนูู ุฒุฑ "ุฅุถุงูุฉ ุฏูุนุฉ ุฌุฏูุฏุฉ"
// ููุก ุงูุจูุงูุงุช:
// - ุงุฎุชูุงุฑ ุงูุทุงูุจ
// - ุงุฎุชูุงุฑ ุงูุฏูุฑุฉ (ุงุฎุชูุงุฑู)
// - ุงููุจูุบ: 500
// - ุทุฑููุฉ ุงูุฏูุน: ููุฏู
// - ุงูุชุงุฑูุฎ: 2024-01-15
// - ููุงุญุธุงุช: ุฏูุนุฉ ูุงููุฉ
```

### 2. ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช:
```
ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (ููุญุฉ ุงูุชุญูู) โ 
ุณูุธูุฑ ุชููุงุฆูุงู:
- ุฅุฌูุงูู ุงููุชุฏุฑุจูู: 245
- ุงูุฏูุฑุงุช ุงููุดุทุฉ: 18
- ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช: $45,600.00
- ุงูุดูุงุฏุงุช ุงูุตุงุฏุฑุฉ: 128
```

### 3. ุนุฑุถ ุงูุชูุฑูุฑ ุงูุดูุฑู:
```
ุงูุดุคูู ุงููุงููุฉ โ 
ุณูุธูุฑ ุฑุณู ุจูุงูู ุจุฅูุฑุงุฏุงุช ูู ุดูุฑ ูู 2024
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุชุทุจูู ุฌุฏูู ุงูุฏูุนุงุช:
```bash
# ูู phpMyAdmin ุฃู MySQL CLI:
mysql -u root -p ibdaa_platform < database/payments.sql
```

### 2. ุงุฎุชุจุงุฑ API ุงูุฅุญุตุงุฆูุงุช:
```
ุงูุชุญ ูู ุงููุชุตูุญ:
http://localhost/Ibdaa-Taiz/Manager/api/get_dashboard_stats.php
```
ูุฌุจ ุฃู ุชุธูุฑ:
```json
{"success":true,"stats":{...}}
```

### 3. ุงุฎุชุจุงุฑ API ุงููุงููุฉ:
```
ุงูุชุญ ูู ุงููุชุตูุญ (ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู ูู technical):
http://localhost/Ibdaa-Taiz/Manager/api/manage_finance.php
```
ูุฌุจ ุฃู ุชุธูุฑ:
```json
{"success":true,"data":[...],"summary":{...}}
```

### 4. ุงุฎุชุจุงุฑ ุตูุญุฉ ุงูุดุคูู ุงููุงููุฉ:
```
1. ุณุฌู ุฏุฎูู ูู technical
2. ุงุฐูุจ ุฅูู: ุงูุดุคูู ุงููุงููุฉ
3. ูุฌุจ ุฃู ุชุธูุฑ:
   - ุจุทุงูุงุช ุงูุฅุญุตุงุฆูุงุช
   - ุฑุณู ุจูุงูู ููุฅูุฑุงุฏุงุช ุงูุดูุฑูุฉ
   - ุฌุฏูู ุงูุฏูุนุงุช
   - ุฒุฑ "ุฅุถุงูุฉ ุฏูุนุฉ ุฌุฏูุฏุฉ"
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: "ูุง ุชูุฌุฏ ุฏูุนุงุช ูุณุฌูุฉ"
**ุงูุญู**: ุชุฃูุฏ ูู ุชุทุจูู `database/payments.sql` ุงูุฐู ูุญุชูู ุนูู ุจูุงูุงุช ุชุฌุฑูุจูุฉ.

### ูุดููุฉ: "ุบูุฑ ูุตุฑุญ ูู - ูุฐุง ุงููุณู ููุฏุนู ุงูููู ููุท"
**ุงูุญู**: ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ุจุญุณุงุจ role='technical'.

### ูุดููุฉ: ุงูุฑุณู ุงูุจูุงูู ูุง ูุธูุฑ
**ุงูุญู**: 
1. ุชุฃูุฏ ูู ุชุญููู Chart.js ูู `<head>`
2. ุงูุชุญ Console ูู ุงููุชุตูุญ ูุงุจุญุซ ุนู ุฃุฎุทุงุก JavaScript
3. ุชุฃูุฏ ูู ูุฌูุฏ ุจูุงูุงุช ุดูุฑูุฉ ูู ุฌุฏูู payments

### ูุดููุฉ: ุงูุฅุญุตุงุฆูุงุช ุชุธูุฑ 0
**ุงูุญู**:
1. ุชุฃูุฏ ูู ูุฌูุฏ ุจูุงูุงุช ูู ุงูุฌุฏุงูู (users, courses, payments)
2. ุชุญูู ูู ุฃู `get_dashboard_stats.php` ูุนูู ุจุดูู ุตุญูุญ
3. ุชุญูู ูู ุฃู ุงูุฌุฏุงูู ุงููุทููุจุฉ ููุฌูุฏุฉ

---

## ๐ ุงููููุงุช ุงููุนููุฉ

```
Manager/
  โโโ dashboard.php          (ุชู ุงูุชุญุฏูุซ - ุฅุญุตุงุฆูุงุช ุญููููุฉ + ูุณู ูุงููุฉ ูุงูู)
  โโโ api/
      โโโ get_dashboard_stats.php  (ุฌุฏูุฏ - API ููุฅุญุตุงุฆูุงุช)
      โโโ manage_finance.php        (ุฌุฏูุฏ - API ูููุงููุฉ)

database/
  โโโ payments.sql           (ุฌุฏูุฏ - ุฌุฏูู ุงูุฏูุนุงุช)
```

---

## ๐ฏ ุงูุฎุทูุงุช ุงููุงุฏูุฉ ุงูููุชุฑุญุฉ

### ุงููุฑุญูุฉ 4 (ุงููุชุจููุฉ):
1. โ ~~ุฅุตูุงุญ ุงูุจูุงูุงุช ุงูููููุฉ~~
2. โ ~~ุจูุงุก ูุณู ุงูุดุคูู ุงููุงููุฉ~~
3. โณ ุฅุถุงูุฉ ุฃุฒุฑุงุฑ CRUD ูู:
   - `renderTrainees()` - ุชุนุฏูู/ุญุฐู ุงููุชุฏุฑุจูู
   - `renderTrainers()` - ุชุนุฏูู/ุญุฐู ุงููุฏุฑุจูู
   - `renderCourses()` - ุชุนุฏูู/ุญุฐู ุงูุฏูุฑุงุช

### ุชุญุณููุงุช ุฅุถุงููุฉ:
- Modal ูุฅุถุงูุฉ ุฏูุนุฉ ุฌุฏูุฏุฉ (ูุน ุงุฎุชูุงุฑ ุงูุทุงูุจ ูุงูุฏูุฑุฉ)
- Modal ูุชุนุฏูู ุฏูุนุฉ ููุฌูุฏุฉ
- ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ ุงููุงููุฉ ุฅูู CSV/Excel
- ุฅุถุงูุฉ ููุงุชุฑ ููุจุญุซ ูู ุงูุฏูุนุงุช (ุญุณุจ ุงูุชุงุฑูุฎุ ุงูุทุงูุจุ ุงูุญุงูุฉ)
- ุฅุถุงูุฉ ุฑุณู ุจูุงูู ุฏุงุฆุฑู (Pie Chart) ูุชูุฒูุน ุทุฑู ุงูุฏูุน

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃูุงู**: ุชู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูู ุฌููุน APIs ุงููุงููุฉ
2. **ุงูุฃุฏุงุก**: ุงุณุชุฎุฏุงู LIMIT 500 ูู ุฌูุจ ุงูุจูุงูุงุช ูุชุฌูุจ ุงูุจุทุก
3. **ุงูุชูุงูููุฉ**: ุงูููุฏ ูุชูุงูู ูุน PHP 7.4+ ู MySQL 5.7+
4. **ุงูุงุณุชุฌุงุจุฉ**: ุงููุงุฌูุฉ ูุชุฌุงูุจุฉ ูุน ุฌููุน ุงูุดุงุดุงุช (Responsive)

---

## โ ููุงูุฉ ุงูุชูุฑูุฑ

**ุงูุชุงุฑูุฎ**: ููุงูุฑ 2024
**ุงูุฅุตุฏุงุฑ**: 2.0.0
**ุงูุญุงูุฉ**: โ ููุชูู ููุฎุชุจุฑ

---

ยฉ 2024 ููุตุฉ ุฅุจุฏุงุน ููุชุฏุฑูุจ | Ibdaa Training Platform
