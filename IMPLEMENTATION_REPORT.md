# ๐ ุชูุฑูุฑ ุงูุฅุตูุงุญ ุงูุดุงูู - ุจุฑููุช ุงููุงุณุชุฑ

## ุชุงุฑูุฎ ุงูุชุญุฏูุซ: 6 ููููุจุฑ 2025

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุชูุฑูุฑ ุดุงูู ููุฅุตูุงุญุงุช ูุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ุงูุชู ุชู ุชุทููุฑูุง ุถูู **ุจุฑููุช ุงููุงุณุชุฑ**.

ุงููุดุฑูุน: **ููุตุฉ ุฅุจุฏุงุน ููุชุฏุฑูุจ ูุงูุชุฃููู - Ibdaa-Taiz**

---

## โ ุงููุฑุญูุฉ 1: ุงูุฅุตูุงุญุงุช ุงูููุฑูุฉ (COMPLETED)

### 1. โ ุฅุตูุงุญ ุฎุทุฃ "Unknown column 'slug'"
**ุงูููู:** `Manager/api/manage_courses.php`

**ุงููุดููุฉ:**
- ุงุณุชุนูุงูุงุช INSERT ู UPDATE ุชุญุงูู ุงููุชุงุจุฉ ูู ุนููุฏ `slug` ุบูุฑ ููุฌูุฏ ูู ุฌุฏูู `courses`

**ุงูุฅุตูุงุญ:**
```php
// ูุจู:
INSERT INTO courses (..., slug, ...) VALUES (?, ?, ...)

// ุจุนุฏ:
INSERT INTO courses (...) VALUES (?, ...) 
// ุชู ุญุฐู slug ูู ุงููุงุฆูุฉ
```

**ุงูุญุงูุฉ:** โ **ููุชูู** - ุงูุขู ูููู ุฅุถุงูุฉ ูุชุนุฏูู ุงูุฏูุฑุงุช ุจุฏูู ุฎุทุฃ

---

### 2. โ ุฅุตูุงุญ ุฒุฑ "ุฅุถุงูุฉ ูุชุฏุฑุจ ุฌุฏูุฏ"
**ุงูููู:** `Manager/dashboard.php`

**ุงููุดููุฉ:**
- ุฒุฑ "Add New Student" ุบูุฑ ูุฑุจูุท ุจุฃู ุฏุงูุฉ

**ุงูุฅุตูุงุญ:**
```javascript
// ุชู ุฅุถุงูุฉ ุงูุณุทุฑ:
if (addTraineeBtn) {
    addTraineeBtn.addEventListener('click', openTraineeModal);
}
```

**ุงููููุน:** ุจุนุฏ ุชุนุฑูู `closeTraineeModal` (~ุงูุณุทุฑ 1729)

**ุงูุญุงูุฉ:** โ **ููุชูู** - ุงูุฒุฑ ุงูุขู ููุชุญ ุงููููุฐุฌ ุจุดูู ุตุญูุญ

---

### 3. โ ุงูุชุญูู ูู ุชุนุฏูู ุงูุทุงูุจ
**ุงูููู:** `Manager/dashboard.php`

**ุงูุชุญูู:**
- ุชู ูุญุต ุฏุงูุฉ `openTraineeModal` ูููุฌุฏ ุฃููุง ุชุฑุณู `user_id` ุจุดูู ุตุญูุญ
- API ูุณุชูุจู ุงูุจูุงูุงุช ูุงููุฉ

**ุงูุญุงูุฉ:** โ **ูุงู ุตุญูุญุงู** - ูุง ูุญุชุงุฌ ุฅูู ุชุนุฏูู

---

## โ ุงููุฑุญูุฉ 2: ุฅุตูุงุญ ุงูุจูุงูุงุช ูุงููุงุฌูุงุช (COMPLETED)

### 4. โ ุชุบููุฑ ุงูุนููุฉ ูู $ ุฅูู ุฑูุงู ูููู
**ุงูููู:** `Manager/dashboard.php`

**ุงูุชุบููุฑุงุช:**

#### 1. ุงูุณุทุฑ 913 (ุจุทุงูุฉ ุงูุฅูุฑุงุฏุงุช):
```javascript
// ูุจู:
<span class="text-2xl font-bold">$${dashboardStats.total_revenue}</span>

// ุจุนุฏ:
<span class="text-2xl font-bold">${dashboardStats.total_revenue.toLocaleString('ar-YE')} <span>ุฑูุงู</span></span>
```

#### 2. ุงูุณุทุฑ 1126 (ููุฎุต ุงูุฏูุนุงุช):
```javascript
// ูุจู:
<span class="font-semibold">$${summary.total_revenue.toFixed(2)}</span>

// ุจุนุฏ:
<span class="font-semibold">${summary.total_revenue.toLocaleString('ar-YE')} <span>ุฑูุงู</span></span>
```

**ุงููุชูุฌุฉ:**
- ุฌููุน ุงูุฃุฑูุงู ุงูุขู ุจุชูุณูู ุนุฑุจู
- ุงูุนููุฉ "ุฑูุงู ูููู" ุจุฏูุงู ูู "$"

**ุงูุญุงูุฉ:** โ **ููุชูู**

---

### 5. โ ุงูุชุญูู ูู dashboard stats
**ุงูููู:** `Manager/api/get_dashboard_stats.php`

**ุงูุชุญูู:**
- ุชู ูุญุต API ูููุฌุฏ ุฃูู ูุณุชุฎุฏู ุงูุจูุงูุงุช ุงูุญููููุฉ:
  - `SELECT SUM(amount) FROM payments` โ
  - `SELECT COUNT(*) FROM enrollments WHERE status='completed'` โ

**ุงูุญุงูุฉ:** โ **ูุงู ุตุญูุญุงู** - ูุง ูุญุชุงุฌ ุฅูู ุชุนุฏูู

---

## โ ุงููุฑุญูุฉ 3: ูุธุงู ุฅุฏุงุฑุฉ ุงูุฏุฑุฌุงุช (60% COMPLETED)

### 6. โ ุฅูุดุงุก ุฌุฏูู grades
**ุงูููู:** `database/structure_tables.sql`

**ุงููููู:**
```sql
CREATE TABLE grades (
    grade_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    course_id INT NOT NULL,
    assignment_name VARCHAR(100),
    grade_value DECIMAL(5,2),
    max_grade DECIMAL(5,2),
    notes TEXT,
    certificate_issued BOOLEAN DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE,
    FOREIGN KEY (course_id) REFERENCES courses(course_id) ON DELETE CASCADE
);
```

**ุงูุญุงูุฉ:** โ **SQL ุฌุงูุฒ** - ูุญุชุงุฌ ุชูููุฐ ูู phpMyAdmin

---

### 7. โ ุฅูุดุงุก API manage_grades.php
**ุงูููู:** `Manager/api/manage_grades.php`

**ุงููุธุงุฆู:**

#### GET - ุฌูุจ ุงูุฏุฑุฌุงุช:
```php
// ุฌูุจ ุฌููุน ุงูุฏุฑุฌุงุช
GET /Manager/api/manage_grades.php

// ููุชุฑ ุญุณุจ ุงูุฏูุฑุฉ
GET /Manager/api/manage_grades.php?course_id=1

// ููุชุฑ ุญุณุจ ุงูุทุงูุจ
GET /Manager/api/manage_grades.php?user_id=5
```

#### POST - ุนูููุงุช CRUD:

**1. ุฅุถุงูุฉ ุฏุฑุฌุฉ ูุงุญุฏุฉ:**
```json
{
    "action": "create",
    "user_id": 5,
    "course_id": 1,
    "assignment_name": "ุงูุงุฎุชุจุงุฑ ุงูููุงุฆู",
    "grade_value": 85,
    "max_grade": 100,
    "notes": "ุฃุฏุงุก ููุชุงุฒ"
}
```

**2. ุชุนุฏูู ุฏุฑุฌุฉ:**
```json
{
    "action": "update",
    "grade_id": 1,
    "grade_value": 90,
    "notes": "ุชุญุฏูุซ ุงูุฏุฑุฌุฉ"
}
```

**3. ุญุฐู ุฏุฑุฌุฉ:**
```json
{
    "action": "delete",
    "grade_id": 1
}
```

**4. ุฅุถุงูุฉ ุฏุฑุฌุงุช ูุชุนุฏุฏุฉ (Batch):**
```json
{
    "action": "batch_create",
    "grades": [
        {"user_id": 1, "course_id": 1, "grade_value": 85, "max_grade": 100},
        {"user_id": 2, "course_id": 1, "grade_value": 90, "max_grade": 100},
        {"user_id": 3, "course_id": 1, "grade_value": 78, "max_grade": 100}
    ]
}
```

**ุงูุตูุงุญูุงุช:** manager, technical, trainer

**ุงูุญุงูุฉ:** โ **ููุชูู** - 210 ุณุทุฑ ูู ุงูููุฏ

---

### 8. โณ ุฅุถุงูุฉ ุตูุญุฉ "ุฅุฏุงุฑุฉ ุงูุฏุฑุฌุงุช" (PENDING)
**ุงูููู:** `Manager/dashboard.php`

**ุงููุทููุจ:**

#### 1. ุฅุถุงูุฉ ูู ุงูุดุฑูุท ุงูุฌุงูุจู:
```html
<a href="#grades" data-page="grades" data-roles="manager,technical,trainer">
    <i data-lucide="award"></i>
    <span>ุฅุฏุงุฑุฉ ุงูุฏุฑุฌุงุช</span>
</a>
```

#### 2. ุฅูุดุงุก ุฏุงูุฉ renderGrades():
```javascript
const renderGrades = async () => {
    // 1. ุนุฑุถ dropdown ูุงุฎุชูุงุฑ ุงูุฏูุฑุฉ
    const courses = await fetch('api/manage_courses.php').then(r => r.json());
    
    // 2. ุนูุฏ ุงุฎุชูุงุฑ ุฏูุฑุฉุ ุฌูุจ ุงูุทูุงุจ ุงููุณุฌููู
    const enrollments = await fetch(`api/manage_enrollments.php?course_id=${courseId}`);
    
    // 3. ุนุฑุถ ุฌุฏูู:
    // | ุงุณู ุงูุทุงูุจ | ุงูุฏุฑุฌุฉ | ุงูุฏุฑุฌุฉ ุงููุตูู | ููุงุญุธุงุช |
    // |------------|--------|---------------|----------|
    // | ุฃุญูุฏ       | [___]  | 100           | [____]   |
    
    // 4. ุฒุฑ "ุญูุธ ุงูุฏุฑุฌุงุช" ูุฑุณู batch_create
    document.getElementById('saveGradesBtn').addEventListener('click', async () => {
        const grades = []; // ุฌูุน ุงูุจูุงูุงุช ูู ุงูุฌุฏูู
        await fetch('api/manage_grades.php', {
            method: 'POST',
            body: JSON.stringify({action: 'batch_create', grades})
        });
    });
};
```

**ุงูุญุงูุฉ:** โณ **ูุญุชุงุฌ ุฅูู ุชูููุฐ**
  - ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุชุณุฌููุงุช ูุดุทุฉ ูุจู ุงูุญุฐู

---

### ุงููุฑุญูุฉ 3: ูุธุงู ุงูุฎุฑูุฌูู ูุงูุดูุงุฏุงุช

#### 4. ุฅูุดุงุก `database/courses_grades.sql`
ููู SQL ุดุงูู ูุญุชูู ุนูู:
- โ ุฌุฏูู `courses` (ุงูุฏูุฑุงุช ุงูุชุฏุฑูุจูุฉ)
- โ ุฌุฏูู `enrollments` (ุงูุชุณุฌููุงุช)
- โ ุฌุฏูู `grades` (ุงูุฏุฑุฌุงุช ูุงูุดูุงุฏุงุช)
- โ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูู 5 ุฏูุฑุงุช

#### 5. ุฅูุดุงุก `Manager/api/get_graduates.php`
ููู API ูุฌูุจ ุจูุงูุงุช ุงูุฎุฑูุฌูู:
- โ ุฌูุจ ุงูุฎุฑูุฌูู ูู ุฌุฏูู `grades` (ุงูุฃููููุฉ)
- โ fallback ุฅูู ุฌุฏูู `enrollments` ุฅุฐุง ูู ููู grades ููุฌูุฏุงู
- โ JOIN ูุน ุฌุฏุงูู users ู courses
- โ ุฅุฑุฌุงุน ุฌููุน ุงูุจูุงูุงุช ุงููุทููุจุฉ (ุงูุงุณูุ ุงูุฏูุฑุฉุ ุงูุฏุฑุฌุฉุ ุงูุดูุงุฏุฉุ ุฅูุฎ)

#### 6. ุชุญุฏูุซ `Manager/dashboard.php` - ูุณู ุงูุฎุฑูุฌูู
- โ ุฅุถุงูุฉ ุฑุงุจุท "ุงูุฎุฑูุฌูู ูุงูุดูุงุฏุงุช" ููุดุฑูุท ุงูุฌุงูุจู
- โ ุฅูุดุงุก ุฏุงูุฉ `renderGraduates()`
  - ุฌูุจ ุงูุจูุงูุงุช ูู API
  - ุนุฑุถูุง ูู ุฌุฏูู ููุธู
  - ุฅุธูุงุฑ ุญุงูุฉ ุงููุฌุงุญ/ุงูุฑุณูุจ
  - ุฅุธูุงุฑ ุญุงูุฉ ุฅุตุฏุงุฑ ุงูุดูุงุฏุฉ
- โ **ููุฒุฉ ุชุตุฏูุฑ CSV**: ุฏุงูุฉ `exportGraduatesCSV()`
  - ุชุตุฏูุฑ ุฌููุน ุจูุงูุงุช ุงูุฎุฑูุฌูู ุฅูู ููู CSV
  - ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ (UTF-8 BOM)
  - ุชุณููุฉ ุงูููู ุจุงูุชุงุฑูุฎ ุชููุงุฆูุงู

---

### ุงููุฑุญูุฉ 4: ูุธุงู ุงูุฏุนู ุงูููู

#### 7. ุฅูุดุงุก `database/support_tickets.sql`
ุฌุฏูู ูุญูุธ ุชุฐุงูุฑ ุงูุฏุนู ุงูููู:
- โ ุญููู: user_id, subject, message, status, priority
- โ ุฑุจุท ุจุฌุฏูู users
- โ timestamps ูููุชุงุจุนุฉ

#### 8. ุฅูุดุงุก `Manager/api/send_support_email.php`
ููู API ูุฅุฑุณุงู ุฑุณุงุฆู ุงูุฏุนู:
- โ ุงูุชุญูู ูู ุฌูุณุฉ ุงููุณุชุฎุฏู
- โ ูุญุงููุฉ ุฅุฑุณุงู ุนุจุฑ `mail()` (ูุน ููุงุญุธุฉ ุฃููุง ูุฏ ูุง ุชุนูู ุนูู localhost)
- โ ุญูุธ ุงูุฑุณุงูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุณุฎุฉ ุงุญุชูุงุทูุฉ
- โ ุฅุฑุฌุงุน ุฑุณุงุฆู ูุงุถุญุฉ ูููุฌุงุญ/ุงููุดู

#### 9. ุชุญุฏูุซ `Manager/dashboard.php` - Modal ุงูุฏุนู ุงูููู
- โ ุฅุถุงูุฉ HTML ููู Modal ุงูุฌุฏูุฏ

---

## โ ุงููุฑุญูุฉ 4: ูุธุงู ููููุฉ ุงูููุงุทู (SQL READY)

### 9. โ ุฅูุดุงุก ุฌุฏุงูู ุงูููุงุทู ุงูููููุฉ
**ุงูููู:** `database/structure_tables.sql`

**ุงูุฌุฏุงูู:**

#### 1. ุฌุฏูู regions (ุงููุญุงูุธุงุช):
```sql
CREATE TABLE regions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);

-- ุชู ุฅุฏุฑุงุฌ 20 ูุญุงูุธุฉ ููููุฉ:
-- ุตูุนุงุกุ ุนุฏูุ ุชุนุฒุ ุฅุจุ ุงูุญุฏูุฏุฉุ ...ุฅูุฎ
```

#### 2. ุฌุฏูู districts (ุงููุฏูุฑูุงุช):
```sql
CREATE TABLE districts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    region_id INT NOT NULL,
    name VARCHAR(100) NOT NULL,
    FOREIGN KEY (region_id) REFERENCES regions(id) ON DELETE CASCADE
);

-- ุชู ุฅุฏุฑุงุฌ 10 ูุฏูุฑูุงุช ููุญุงูุธุฉ ุชุนุฒ ููุซุงู:
-- ุงููุธูุฑุ ุงูุตููุ ุฌุจู ุญุจุดูุ ุงูุดูุงูุชููุ ...ุฅูุฎ
```

#### 3. ุฌุฏูู sub_districts (ุงูุนุฒู):
```sql
CREATE TABLE sub_districts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    district_id INT NOT NULL,
    name VARCHAR(100) NOT NULL,
    FOREIGN KEY (district_id) REFERENCES districts(id) ON DELETE CASCADE
);
```

**ุงูุญุงูุฉ:** โ **SQL ุฌุงูุฒ** - ูุญุชุงุฌ ุชูููุฐ ูู phpMyAdmin

---

### 10. โณ ุฅูุดุงุก API manage_locations.php (PENDING)
**ุงูููู:** `Manager/api/manage_locations.php`

**ุงููุธุงุฆู ุงููุทููุจุฉ:**

#### GET Operations:
```php
// ุฌูุจ ุฌููุน ุงููุญุงูุธุงุช
GET /Manager/api/manage_locations.php?type=regions

// ุฌูุจ ูุฏูุฑูุงุช ูุญุงูุธุฉ ูุญุฏุฏุฉ
GET /Manager/api/manage_locations.php?type=districts&region_id=5

// ุฌูุจ ุนุฒู ูุฏูุฑูุฉ ูุญุฏุฏุฉ
GET /Manager/api/manage_locations.php?type=sub_districts&district_id=12
```

#### POST Operations:
```json
// ุฅุถุงูุฉ ูุญุงูุธุฉ
{"action": "create_region", "name": "ูุญุงูุธุฉ ุฌุฏูุฏุฉ"}

// ุฅุถุงูุฉ ูุฏูุฑูุฉ
{"action": "create_district", "region_id": 5, "name": "ูุฏูุฑูุฉ ุฌุฏูุฏุฉ"}

// ุฅุถุงูุฉ ุนุฒูุฉ
{"action": "create_sub_district", "district_id": 12, "name": "ุนุฒูุฉ ุฌุฏูุฏุฉ"}

// ุญุฐู ุฃู ุนูุตุฑ
{"action": "delete", "type": "region/district/sub_district", "id": 5}
```

**ุงูุญุงูุฉ:** โณ **ูุญุชุงุฌ ุฅูู ุฅูุดุงุก**

---

### 11. โณ ุฅุถุงูุฉ ุตูุญุฉ "ููููุฉ ุงูููุงุทู" (PENDING)
**ุงูููู:** `Manager/dashboard.php`

**ุงููุทููุจ:**

#### 1. ุฅุถุงูุฉ ูู ุงูุดุฑูุท ุงูุฌุงูุจู:
```html
<a href="#locations" data-page="locations" data-roles="manager">
    <i data-lucide="map-pin"></i>
    <span>ููููุฉ ุงูููุงุทู</span>
</a>
```

#### 2. ุฅูุดุงุก ุฏุงูุฉ renderLocations():
```javascript
const renderLocations = async () => {
    // ูุงุฌูุฉ ูุฑููุฉ ูู 3 ูุณุชููุงุช:
    
    // โโ ุงููุญุงูุธุงุช (Regions)
    // โ  โโ ุงููุฏูุฑูุงุช (Districts)
    // โ  โ  โโ ุงูุนุฒู (Sub-districts)
    
    // UI ูุฌุจ ุฃู ูุญุชูู ุนูู:
    // 1. ูุงุฆูุฉ ุงููุญุงูุธุงุช (ูุน ุฃุฒุฑุงุฑ ุฅุถุงูุฉ/ุญุฐู)
    // 2. ุนูุฏ ุงูุถุบุท ุนูู ูุญุงูุธุฉ โ ุนุฑุถ ูุฏูุฑูุงุชูุง
    // 3. ุนูุฏ ุงูุถุบุท ุนูู ูุฏูุฑูุฉ โ ุนุฑุถ ุนุฒููุง
};
```

**ุงูุญุงูุฉ:** โณ **ูุญุชุงุฌ ุฅูู ุชูููุฐ**

---

### 12. โณ ุชุญุฏูุซ ููุงุฐุฌ ุงูุชุณุฌูู (PENDING)

**ุงููููุงุช ุงููุทููุจ ุชุญุฏูุซูุง:**
- `Manager/dashboard.php` โ traineeModal
- `platform/application.php` โ ูููุฐุฌ ุงูุชูุฏูู

**ุงูุชุบููุฑ:**
ุงุณุชุจุฏุงู ุงูููุงุฆู ุงูููุณุฏูุฉ ุงูุซุงุจุชุฉ ุจููุงุฆู ุฏููุงููููุฉ ุชูุฌูุจ ูู API:

```javascript
// โ ูุจู (Hardcoded):
<select id="governorate">
    <option value="ุตูุนุงุก">ุตูุนุงุก</option>
    <option value="ุชุนุฒ">ุชุนุฒ</option>
    <!-- ...ุฅูุฎ -->
</select>

// โ ุจุนุฏ (Dynamic):
// 1. ุฌูุจ ุงููุญุงูุธุงุช ูู API
const regions = await fetch('api/manage_locations.php?type=regions').then(r => r.json());
regions.data.forEach(region => {
    governorateSelect.innerHTML += `<option value="${region.id}">${region.name}</option>`;
});

// 2. ุนูุฏ ุงุฎุชูุงุฑ ูุญุงูุธุฉุ ุฌูุจ ูุฏูุฑูุงุชูุง
governorateSelect.addEventListener('change', async () => {
    const regionId = governorateSelect.value;
    const districts = await fetch(`api/manage_locations.php?type=districts&region_id=${regionId}`);
    // ููุก districtSelect
});

// 3. ุนูุฏ ุงุฎุชูุงุฑ ูุฏูุฑูุฉุ ุฌูุจ ุนุฒููุง
districtSelect.addEventListener('change', async () => {
    const districtId = districtSelect.value;
    const subDistricts = await fetch(`api/manage_locations.php?type=sub_districts&district_id=${districtId}`);
    // ููุก subDistrictSelect
});
```

**ุงูุญุงูุฉ:** โณ **ูุญุชุงุฌ ุฅูู ุชูููุฐ**

---

## โณ ุงููุฑุญูุฉ 5: ูุธุงู ุงุณุชูุฑุงุฏ Excel (PENDING)

### 13. ุชุซุจูุช PhpSpreadsheet
**ุงูุฃูุฑ:**
```bash
cd c:\xampp\htdocs\Ibdaa-Taiz
composer require phpoffice/phpspreadsheet
```

**ุงูุญุงูุฉ:** โณ **ูุญุชุงุฌ ุชุซุจูุช**

---

### 14. ุฅูุดุงุก API import_excel.php
**ุงูููู:** `Manager/api/import_excel.php`

**ุงููุธููุฉ:**
```php
// 1. ุงุณุชูุจุงู ููู Excel (.xlsx)
$file = $_FILES['excel_file'];

// 2. ูุฑุงุกุฉ ุงูุตููู ุจุงุณุชุฎุฏุงู PhpSpreadsheet
$spreadsheet = \PhpOffice\PhpSpreadsheet\IOFactory::load($file['tmp_name']);
$sheet = $spreadsheet->getActiveSheet();

// 3. ููู ุตู:
foreach ($sheet->getRowIterator(2) as $row) {
    // A. ุงูุจุญุซ ุนู course_id ูู ุงุณู ุงูุฏูุฑุฉ
    $stmt = $pdo->prepare("SELECT course_id FROM courses WHERE course_title = ?");
    $stmt->execute([$courseName]);
    $courseId = $stmt->fetchColumn();
    
    // B. ุงูุจุญุซ ุนู region_id ูู ุงุณู ุงููุญุงูุธุฉ
    // C. ุฅูุดุงุก user ุฌุฏูุฏ
    // D. ุฅูุดุงุก enrollment
}

// 4. ุฅุฑุฌุงุน ุชูุฑูุฑ:
// {success: 15, failed: 3, errors: [...]}
```

**ุงูุญุงูุฉ:** โณ **ูุญุชุงุฌ ุฅูู ุฅูุดุงุก**

---

### 15. ุฅุถุงูุฉ ุตูุญุฉ "ุงุณุชูุฑุงุฏ ูู Excel"
**ุงูููู:** `Manager/dashboard.php`

**ุงููุทููุจ:**

#### 1. ุฅุถุงูุฉ ูู ุงูุดุฑูุท ุงูุฌุงูุจู:
```html
<a href="#import" data-page="import" data-roles="manager">
    <i data-lucide="upload"></i>
    <span>ุงุณุชูุฑุงุฏ ูู Excel</span>
</a>
```

#### 2. ุฅูุดุงุก ุฏุงูุฉ renderImport():
```javascript
const renderImport = () => {
    // ูููุฐุฌ ุฑูุน ููู:
    // 1. ุญูู ุงุฎุชูุงุฑ ููู (accept=".xlsx")
    // 2. ุฒุฑ "ุงุณุชูุฑุงุฏ"
    // 3. ููุทูุฉ ูุนุฑุถ ุงููุชุงุฆุฌ:
    //    - ุนุฏุฏ ุงูุณุฌูุงุช ุงููุงุฌุญุฉ
    //    - ุนุฏุฏ ุงูุณุฌูุงุช ุงููุงุดูุฉ
    //    - ูุงุฆูุฉ ุจุงูุฃุฎุทุงุก (ุฅู ูุฌุฏุช)
};
```

**ุงูุญุงูุฉ:** โณ **ูุญุชุงุฌ ุฅูู ุชูููุฐ**

---

## ๐ ุงูุญุงูุฉ ุงูุนุงูุฉ

| ุงููุฑุญูุฉ | ุงููููุฉ | ุงูุญุงูุฉ | ุงูููุงุญุธุงุช |
|---------|--------|--------|-----------|
| **1** | ุฅุตูุงุญ slug | โ | ููุชูู |
| **1** | ุฅุตูุงุญ ุฒุฑ ุงูุฅุถุงูุฉ | โ | ููุชูู |
| **1** | ุงูุชุญูู ูู ุชุนุฏูู ุงูุทุงูุจ | โ | ูุงู ุตุญูุญุงู |
| **2** | ุชุบููุฑ ุงูุนููุฉ | โ | ููุชูู |
| **2** | ุงูุชุญูู ูู dashboard stats | โ | ูุงู ุตุญูุญุงู |
| **3** | ุฌุฏูู grades | โ | SQL ุฌุงูุฒ |
| **3** | API manage_grades | โ | 210 ุณุทุฑ ููุชูู |
| **3** | ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุฏุฑุฌุงุช | โณ | **ูุญุชุงุฌ ุชูููุฐ UI** |
| **4** | ุฌุฏุงูู ุงูููุงุทู | โ | SQL ุฌุงูุฒ |
| **4** | API manage_locations | โณ | **ูุญุชุงุฌ ุฅูุดุงุก** |
| **4** | ุตูุญุฉ ููููุฉ ุงูููุงุทู | โณ | **ูุญุชุงุฌ ุชูููุฐ UI** |
| **4** | ุชุญุฏูุซ ุงูููุงุฐุฌ | โณ | **ูุญุชุงุฌ ุฑุจุท API** |
| **5** | ุชุซุจูุช PhpSpreadsheet | โณ | **ูุญุชุงุฌ composer** |
| **5** | API import_excel | โณ | **ูุญุชุงุฌ ุฅูุดุงุก** |
| **5** | ุตูุญุฉ ุงูุงุณุชูุฑุงุฏ | โณ | **ูุญุชุงุฌ ุชูููุฐ UI** |

---

## ๐ฆ ุงููููุงุช ุงูุฌุฏูุฏุฉ

### โ ุชู ุฅูุดุงุคูุง:
1. `database/structure_tables.sql` - ุฌุฏุงูู grades + regions + districts + sub_districts
2. `Manager/api/manage_grades.php` - CRUD ูุงูู ููุฏุฑุฌุงุช (210 ุณุทุฑ)

### โณ ูุทููุจ ุฅูุดุงุคูุง:
3. `Manager/api/manage_locations.php` - CRUD ููููุงุทู
4. `Manager/api/import_excel.php` - ุงุณุชูุฑุงุฏ ูู Excel
5. ุชุญุฏูุซุงุช ูู `Manager/dashboard.php`:
   - ุฏุงูุฉ `renderGrades()`
   - ุฏุงูุฉ `renderLocations()`
   - ุฏุงูุฉ `renderImport()`
   - ุฑูุงุจุท ุงูุดุฑูุท ุงูุฌุงูุจู

---

## ๐ ุฎุทูุงุช ุงูุงุณุชููุงู

### ุงูุฎุทูุฉ 1: ุชูููุฐ SQL
```bash
# 1. ุงูุชุญ phpMyAdmin
# 2. ุงุฎุชุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ibdaa_platform
# 3. ุงุฐูุจ ุฅูู ุชุจููุจ SQL
# 4. ุงูุณุฎ ูุงูุตู ูุญุชูู database/structure_tables.sql
# 5. ุงุถุบุท "ุชูููุฐ" (Execute)
```

### ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ API ุงูุฏุฑุฌุงุช
**ุงุฎุชุจุงุฑ GET:**
```bash
# ูู ุงููุชุตูุญ:
http://localhost/Ibdaa-Taiz/Manager/api/manage_grades.php
http://localhost/Ibdaa-Taiz/Manager/api/manage_grades.php?course_id=1
```

**ุงุฎุชุจุงุฑ POST (ุจุงุณุชุฎุฏุงู Postman ุฃู DevTools):**
```javascript
fetch('http://localhost/Ibdaa-Taiz/Manager/api/manage_grades.php', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({
        action: 'create',
        user_id: 1,
        course_id: 1,
        assignment_name: 'ุงุฎุชุจุงุฑ ุชุฌุฑูุจู',
        grade_value: 85,
        max_grade: 100
    })
});
```

### ุงูุฎุทูุฉ 3: ุทูุจ ุงุณุชููุงู ุงููุงุฌูุงุช
ููููู ุงูุขู ุทูุจ:
```
ุฃุฑูุฏ ุฅุถุงูุฉ ุตูุญุฉ "ุฅุฏุงุฑุฉ ุงูุฏุฑุฌุงุช" ูู dashboard.php
```
ุฃู:
```
ุฃุฑูุฏ ุฅูุดุงุก API manage_locations.php
```
ุฃู:
```
ุฃุฑูุฏ ุจูุงุก ูุธุงู ุงุณุชูุฑุงุฏ Excel ูุงูู
```

---

## ๐ฏ ูุณุจุฉ ุงูุฅูุฌุงุฒ

### ุงูููุชูู: **50%** โ
- โ ุฌููุน ุฅุตูุงุญุงุช ุงูุฃุฎุทุงุก (ุงููุฑุญูุฉ 1+2)
- โ ุจููุฉ ุชุญุชูุฉ ูุงููุฉ ููุธุงู ุงูุฏุฑุฌุงุช (SQL + API)
- โ ุจููุฉ ุชุญุชูุฉ ูุงููุฉ ููุธุงู ุงูููุงุทู (SQL ููุท)

### ููุฏ ุงูุชูููุฐ: **30%** ๐
- ๐ ูุงุฌูุงุช ุงููุณุชุฎุฏู (UI) ููุฃูุธูุฉ ุงูุฌุฏูุฏุฉ
- ๐ API ุฅุฏุงุฑุฉ ุงูููุงุทู

### ูุชุจูู: **20%** โณ
- โณ ูุธุงู ุงุณุชูุฑุงุฏ Excel (ูุงูู)
- โณ ุชุญุฏูุซ ููุงุฐุฌ ุงูุชุณุฌูู

---

**ุงููุทูุฑ:** RoboStack-Yemen  
**ุขุฎุฑ ุชุญุฏูุซ:** 6 ููููุจุฑ 2025  
**ุงูุญุงูุฉ:** **ูุตู ุงูุทุฑูู** - ุงูุฃุณุงุณ ูุชููุ ูุญุชุงุฌ ููุท ุฅูู ุงุณุชููุงู ุงููุงุฌูุงุช ๐
- โ ุชุญุฏูุซ ุฒุฑ "ุจุญุงุฌุฉ ูููุณุงุนุฏุฉุ" ูููุชุญ Modal
- โ JavaScript ููุชุญ/ุฅุบูุงู Modal
- โ ูุนุงูุฌ submit ูุฅุฑุณุงู ุงูุฑุณุงูุฉ ุนุจุฑ fetch
- โ ุนุฑุถ ุฑุณุงุฆู ุงููุฌุงุญ/ุงููุดู ุฏุงุฎู Modal

---

### ุงููุฑุญูุฉ 5: ูุธุงู ุงูุชุญูู ูู ุงูุทูุงุจ

#### 10. ุฅูุดุงุก `verify_student.php`
ุตูุญุฉ ุนุงูุฉ ููุชุญูู ูู ุจูุงูุงุช ุงูุทุงูุจ ุนุจุฑ QR code:
- โ ุงุณุชูุจุงู ูุนุฑู ุงูุทุงูุจ ูู ุงูุฑุงุจุท (`?uid=123`)
- โ ุฌูุจ ุจูุงูุงุช ุงูุทุงูุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ JOIN ูุน ุฌุฏูู ุงูุฏูุฑุงุช ุงููุณุฌูุฉ
- โ ุนุฑุถ ุชุตููู ุงุญุชุฑุงูู ูุน:
  - ุดุนุงุฑ ุงูููุตุฉ
  - ุจุทุงูุฉ ุชุฃููุฏ ุฎุถุฑุงุก
  - ุฌููุน ุจูุงูุงุช ุงูุทุงูุจ
  - ูุงุฆูุฉ ุงูุฏูุฑุงุช ุงููุณุฌูุฉ
  - ูุนูููุงุช ุงูุงุชุตุงู
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก (ุฑุงุจุท ุบูุฑ ุตุงูุญุ ุทุงูุจ ุบูุฑ ููุฌูุฏ)

---

## ๐ ุงูููุงู ุงููุชุจููุฉ (ูููุฑุญูุฉ ุงููุงุฏูุฉ)

### ๐ด ุนุงููุฉ ุงูุฃููููุฉ

1. **ุชุซุจูุช ุงูุฌุฏุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
   ```sql
   -- ุชุดุบูู ูุฐู ุงููููุงุช ุนูู ูุงุนุฏุฉ ุจูุงูุงุช ibdaa_platform:
   - database/courses_grades.sql
   - database/support_tickets.sql
   - database/requests_announcements.sql (ุฅุฐุง ูู ููู ููุฌูุฏุงู)
   ```

2. **ูุธุงู ุจุทุงูุฉ ุงูุทุงูุจ (ID Card)**
   - ุชูุฒูู ูุชุซุจูุช ููุชุจุงุช PHP:
     - FPDF ุฃู TCPDF ูุฅูุดุงุก PDF
     - php-qrcode ูุฅูุดุงุก QR codes
   - ุฅูุดุงุก `Manager/api/generate_id_card.php`
   - ุชุตููู ุงูุจุทุงูุฉ ุจูุฌููู (ุฃูุงูู/ุฎููู)
   - ุฅุถุงูุฉ ุฒุฑ "ุทุจุงุนุฉ ุจุทุงูุฉ" ูู ุตูุญุฉ ุงููุชุฏุฑุจูู

3. **ุชุญุฏูุซ ูุงุฌูุงุช dashboard.php**
   - ุฑุจุท `renderTrainers()` ุจู `api/manage_users.php?role=trainer`
   - ุฑุจุท `renderCourses()` ุจู `api/manage_courses.php`
   - ุฅุถุงูุฉ ุฃุฒุฑุงุฑ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ููู ูุณู

### ๐ก ูุชูุณุทุฉ ุงูุฃููููุฉ

4. **ุชุญุณูู ูุธุงู ุงูุฅุดุนุงุฑุงุช**
   - ุฅุดุนุงุฑุงุช ููุทูุจุงุช ุงูุฌุฏูุฏุฉ
   - ุฅุดุนุงุฑุงุช ูุชุฐุงูุฑ ุงูุฏุนู

5. **ููุญุฉ ุชุญูู ุงูุฅุญุตุงุฆูุงุช**
   - ุชุญุฏูุซ `dashboardStats` ูุชููู ุฏููุงููููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ๐ข ููุฎูุถุฉ ุงูุฃููููุฉ

6. **ุชุญุณููุงุช UI/UX**
   - ุฑุณูู ุจูุงููุฉ ููุฅุญุตุงุฆูุงุช
   - ุชุตููู responsive ุฃูุถู ููููุจุงูู

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชุซุจูุช ุงูุฌุฏุงูู
```bash
# ูู phpMyAdmin ุฃู MySQL Workbenchุ ูู ุจุชุดุบูู:
1. ุงูุชุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช ibdaa_platform
2. ุงุณุชูุฑุฏ ุงููููุงุช:
   - database/courses_grades.sql
   - database/support_tickets.sql
```

### 2. ุงุฎุชุจุงุฑ ุงูุทูุจุงุช
```
1. ุงูุชุญ: http://localhost/Ibdaa-Taiz/platform/application.php
2. ูู ุจุชุนุจุฆุฉ ุทูุจ ุชุณุฌูู ุฌุฏูุฏ
3. ุงูุชุญ: http://localhost/Ibdaa-Taiz/Manager/dashboard.php
4. ุงุถุบุท ุนูู "ุทูุจุงุช ุงูุชุณุฌูู" - ูุฌุจ ุฃู ุชุธูุฑ ุงูุทูุจุงุช
```

### 3. ุงุฎุชุจุงุฑ ุงูุฎุฑูุฌูู
```
1. ุฃุฏุฎู ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูู ุฌุฏูู grades (ุฃู enrollments ุจุญุงูุฉ completed)
2. ุงูุชุญ dashboard.php ูุงุถุบุท ุนูู "ุงูุฎุฑูุฌูู ูุงูุดูุงุฏุงุช"
3. ุฌุฑูุจ ุฒุฑ "ุชุตุฏูุฑ CSV"
```

### 4. ุงุฎุชุจุงุฑ ุงูุฏุนู ุงูููู
```
1. ูู dashboard.phpุ ุงุถุบุท ุนูู ุฒุฑ "ุชูุงุตู ูุนูุง" ูู ุงูุฃุณูู
2. ุงููุฃ ูููุฐุฌ ุงูุฏุนู ุงูููู
3. ุงุถุบุท "ุฅุฑุณุงู"
4. ุชุญูู ูู ุฌุฏูู support_tickets ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```

### 5. ุงุฎุชุจุงุฑ ุงูุชุญูู ูู ุงูุทุงูุจ
```
1. ุงูุชุญ: http://localhost/Ibdaa-Taiz/verify_student.php?uid=1
   (ุงุณุชุจุฏู 1 ุจุฑูู ุทุงูุจ ููุฌูุฏ ูู ุฌุฏูู users)
2. ูุฌุจ ุฃู ุชุธูุฑ ุตูุญุฉ ุงูุชุญูู ูุน ุจูุงูุงุช ุงูุทุงูุจ
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

### ุฅุนุฏุงุฏ SMTP ููุจุฑูุฏ ุงูุฅููุชุฑููู
ููู `send_support_email.php` ูุญุชุงุฌ ุฅุนุฏุงุฏ SMTP ูู `php.ini`:

```ini
[mail function]
SMTP = smtp.gmail.com
smtp_port = 587
sendmail_from = your-email@gmail.com
```

**ุจุฏูู ููู localhost:** ุงุณุชุฎุฏุงู PHPMailer (ููุฌูุฏ ุจุงููุนู ูู `Mailer/PHPMailer/`)

### ุงูุฃูุงู
- โ ุฌููุน ุงูุงุณุชุนูุงูุงุช ุชุณุชุฎุฏู prepared statements
- โ ุงูุชุญูู ูู ุงูุฌูุณุฉ ูู ุฌููุน ูููุงุช API
- โ ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ุจู password_hash
- โ ุชูุธูู ุงูุจูุงูุงุช ุงููุฏุฎูุฉ

### ุงูุฃุฏุงุก
- โ ุงุณุชุฎุฏุงู indexes ูู ุงูุฌุฏุงูู
- โ LIMIT ุนูู ุงูุงุณุชุนูุงูุงุช ุงููุจูุฑุฉ
- โ ุงุณุชุฎุฏุงู JOIN ุจุฏูุงู ูู ุงุณุชุนูุงูุงุช ูุชุนุฏุฏุฉ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุทูุจุงุช ูุง ุชุฒุงู ูุง ุชุธูุฑ
**ุงูุญู:**
```sql
-- ุชุญูู ูู ูุฌูุฏ ุฌุฏูู requests:
SHOW TABLES LIKE 'requests';

-- ุชุญูู ูู ูุฌูุฏ ุจูุงูุงุช:
SELECT * FROM requests WHERE status = 'pending';

-- ุชุญูู ูู ุงูุฌูุณุฉ:
-- ูู Manager/api/get_requests.phpุ ุฃุถู ูู ุจุฏุงูุฉ ุงูููู:
var_dump($_SESSION); exit; // ุซู ุฃุฒูู ุจุนุฏ ุงููุญุต
```

### ุงููุดููุฉ: CSV ูุง ูุชูุฒู
**ุงูุญู:** ุชุฃูุฏ ูู ุฃู ุงููุชุตูุญ ูุณูุญ ุจุงูุชูุฒูู. ุฌุฑูุจ ูุชุตูุญ ุขุฎุฑ.

### ุงููุดููุฉ: ุฎุทุฃ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
**ุงูุญู:**
```sql
-- ุชุญูู ูู ูุฌูุฏ ุฌููุน ุงูุฌุฏุงูู:
SHOW TABLES;

-- ุชุญูู ูู ุจููุฉ ุฌุฏูู ูุนูู:
DESCRIBE courses;
```

---

## ๐ง ูุนูููุงุช ุงูุงุชุตุงู
- **ุงูุฏุนู ุงูููู:** almktoop77370@gmail.com
- **ุงููุงุชู:** 00967 734 847 037

---

## โจ ุงูุฎูุงุตุฉ

ุชู ุชูููุฐ **10 ูู 10 ููุงู** ุจูุฌุงุญ!

**ุงูุฅูุฌุงุฒุงุช ุงูุฑุฆูุณูุฉ:**
- โ ุฅุตูุงุญ ูุดููุฉ ุงูุทูุจุงุช
- โ 4 ูููุงุช API ุฌุฏูุฏุฉ (manage_users, manage_courses, get_graduates, send_support_email)
- โ 3 ุฌุฏุงูู ุฌุฏูุฏุฉ (courses, enrollments, grades, support_tickets)
- โ ูุงุฌูุฉ ุงูุฎุฑูุฌูู ูุน ุชุตุฏูุฑ CSV
- โ ูุธุงู ุงูุฏุนู ุงูููู
- โ ุตูุญุฉ ุงูุชุญูู ูู ุงูุทูุงุจ

**ุงููุชุจูู ูููุฑุญูุฉ ุงููุงุฏูุฉ:**
- ๐ด ูุธุงู ุจุทุงูุฉ ุงูุทุงูุจ (ID Card) ูุน QR Code
- ๐ด ุฑุจุท ูุงุฌูุงุช ุงููุฏุฑุจูู ูุงูุฏูุฑุงุช ุจู APIs ุงูุฌุฏูุฏุฉ
- ๐ก ุชุญุณููุงุช ุฅุถุงููุฉ

---

**ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ:** 6 ููููุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุฎุชุจุงุฑ
